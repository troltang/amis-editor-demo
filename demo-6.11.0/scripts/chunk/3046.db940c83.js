"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[3046],{93046:function(e,t,a){a.r(t),a.d(t,{TabsRenderer:function(){return y},default:function(){return p}});var n=a(31635),s=a(96540),i=a(62758),o=a(7309),r=a.n(o),l=a(24713),d=a.n(l),u=a(71121),c=a(11741),h=a.n(c),p=function(e){function t(t){var a=e.call(this,t)||this;a.newTabDefaultId=3;var s=t.location||window.location,o=t.tabs,l=t.source,d=t.data,u=0;if(void 0!==t.activeKey)u=t.activeKey;else if(s&&Array.isArray(o)){var c=s.hash.substring(1),h=r()(o,(function(e){return e.hash===c}));h?u=h.hash:void 0!==t.defaultKey?u="string"==typeof t.defaultKey?(0,i.GvO)(t.defaultKey,t.data):t.defaultKey:t.defaultActiveKey&&(u="string"==typeof t.defaultActiveKey?(0,i.GvO)(t.defaultActiveKey,t.data):t.defaultActiveKey),u=u||o[0]&&o[0].hash||0}var p=(0,n.zs)(a.initTabArray(o,l,d),2),y=p[0],v=p[1];return a.state={prevKey:void 0,activeKey:a.activeKey=u,localTabs:y,isFromSource:v},a}return(0,n.C6)(t,e),t.prototype.initTabArray=function(e,t,a){if(!e)return[[],!1];var s=(0,i.GvO)(t,a,"| raw");if(!Array.isArray(s))return[e,!1];e=Array.isArray(e)?e:[e];var o=[];return s.forEach((function(t){o.push.apply(o,(0,n.fX)([],(0,n.zs)(e.map((function(e){return(0,n.Cl)((0,n.Cl)({},e),{data:t})}))),!1))})),[o,!0]},t.prototype.componentDidMount=function(){var e,t;this.autoJumpToNeighbour(this.activeKey);var a=this.props,n=a.name,s=a.value,o=a.onChange,r=a.source,l=(a.tabs,a.data),d=this.state.localTabs;if(n&&"function"==typeof o&&!r)if((s=null!=s?s:(0,i.dnO)(l,n))&&Array.isArray(d)){var u=this.resolveKeyByValue(s);void 0!==u&&this.handleSelect(u)}else{var c=this.resolveTabByKey(this.activeKey);c&&s!==(null!==(e=c.value)&&void 0!==e?e:c.title)&&o(null!==(t=c.value)&&void 0!==t?t:c.title,n)}},t.prototype.componentDidUpdate=function(e,t){var a,s,o,l=this.props,d=this.state.localTabs,u=(0,i.GvO)(e.defaultActiveKey,e.data),c=(0,i.GvO)(l.defaultActiveKey,l.data);if((0,i.JQ)({tabs:l.tabs,source:(0,i.GvO)(l.source,l.data,"| raw")},{tabs:e.tabs,source:(0,i.GvO)(e.source,e.data,"| raw")},!1)){var h=(0,n.zs)(this.initTabArray(l.tabs,l.source,l.data),2),p=h[0],y=h[1];this.setState({localTabs:p,isFromSource:y}),d=p}if(l.location&&e.location&&l.location.hash!==e.location.hash){var v=l.location.hash.substring(1);if(!v)return;(b=r()(d,(function(e){return e.hash===v})))&&b.hash&&b.hash!==this.state.activeKey&&this.setState({activeKey:this.activeKey=b.hash,prevKey:this.state.activeKey})}else if(Array.isArray(d)&&Array.isArray(t.localTabs)&&JSON.stringify(d.map((function(e){return e.hash})))!==JSON.stringify(t.localTabs.map((function(e){return e.hash})))){var m=this.state.activeKey,f=l.location,b=null;if(f&&Array.isArray(d)){var C=f.hash.substring(1);b=r()(d,(function(e){return e.hash===C}))}b?m=b.hash:d&&d.some((function(e,t){return e.hash?e.hash===m:t===m}))||(m=d&&d[0]&&d[0].hash||0),this.setState({prevKey:void 0,activeKey:this.activeKey=m})}else if(u!==c){if(null==c)return;var g=null;(b=r()(d,(function(e){return e.hash===c})))?g=b.hash:"number"==typeof c&&d[c]&&(g=c),null!==g&&this.setState({prevKey:u,activeKey:this.activeKey=g})}this.autoJumpToNeighbour(this.activeKey);var K,T=this.props,S=T.name,N=T.value,A=T.onChange,x=T.source,O=T.data;S&&"function"==typeof A&&!x&&((N=null!=N?N:(0,i.dnO)(O,S))!==(null!==(a=e.value)&&void 0!==a?a:(0,i.dnO)(e.data,e.name))&&void 0!==(K=this.resolveKeyByValue(N))&&K!==this.activeKey?this.handleSelect(K):this.activeKey!==t.activeKey&&(b=this.resolveTabByKey(this.activeKey))&&N!==(null!==(s=b.value)&&void 0!==s?s:b.title)&&A(null!==(o=b.value)&&void 0!==o?o:b.title,S))},t.prototype.resolveTabByKey=function(e){var t=this.state.localTabs;if(Array.isArray(t))return r()(t,(function(t,a){return t.hash?t.hash===e:a===e}))},t.prototype.resolveKeyByValue=function(e){var t=this.state.localTabs;if(Array.isArray(t)){var a=r()(t,(function(t){var a;return(null!==(a=t.value)&&void 0!==a?a:t.title)===e}));return a&&a.hash?a.hash:t.indexOf(a)}},t.prototype.autoJumpToNeighbour=function(e){var t=this.props,a=(t.tabs,t.data),n=this.state.localTabs;if(Array.isArray(n)){var s=d()(n,(function(t,a){return t.hash?t.hash===e:a===e}));if(n[s]&&!(0,i.zNq)(n[s],this.props.data))for(var o=n.length,r=s,l=s;r-- >=0||l++<o;){var u=null;if(r>=0&&(0,i.zNq)(n[r],a)?u=n[r].hash||r:l<o&&(0,i.zNq)(n[l],a)&&(u=n[l].hash||l),null!==u){this.setState({activeKey:this.activeKey=u});break}}}},t.prototype.handleAdd=function(){var e=this,t=this.state.localTabs.concat();t.push({title:"tab".concat(this.newTabDefaultId++),body:"tab"}),this.setState({localTabs:t},(function(){e.switchTo(e.state.localTabs.length-1)}))},t.prototype.handleClose=function(e,t){return(0,n.sH)(this,void 0,void 0,(function(){var a,s,o;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return a=this.state.localTabs.concat(),s=null==a?void 0:a.findIndex((function(a,n){var s;return e===(t?a.hash:null!==(s=a.hash)&&void 0!==s?s:n)})),-1===s?[2]:(a.splice(s,1),[4,(0,this.props.dispatchEvent)("delete",(0,i.RKM)(this.props,{value:e}))]);case 1:return(null==(o=n.sent())?void 0:o.prevented)||this.setState({localTabs:a}),[2]}}))}))},t.prototype.handleEdit=function(e,t){var a=this.state.localTabs.concat();a[e].title=t,this.setState({localTabs:a})},t.prototype.handleDragChange=function(e){return(0,n.sH)(this,void 0,void 0,(function(){var t,a,s=this;return(0,n.YH)(this,(function(n){return t=this.resolveTabByKey(this.activeKey),(a=this.state.localTabs.concat()).splice(e.newIndex,0,a.splice(e.oldIndex,1)[0]),this.setState({localTabs:a},(function(){if(t){var e=a.indexOf(t);s.switchTo(e)}})),[2]}))}))},t.prototype.handleSelect=function(e){var t;return(0,n.sH)(this,void 0,void 0,(function(){var a,s,o,r,l,d,u,c,h;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return a=this.props,s=a.dispatchEvent,a.data,o=a.env,r=a.onSelect,l=a.id,d=this.state.localTabs,(u=null==d?void 0:d.find((function(t,a){return e===(t.hash?t.hash:a)})))?(null===(t=o.tracker)||void 0===t||t.call(o,{eventType:"tabChange",eventData:{id:l,key:e}}),[4,s("change",(0,i.RKM)(this.props,{value:(null==u?void 0:u.hash)?null==u?void 0:u.hash:e+1}))]):[2];case 1:return(null==(c=n.sent())?void 0:c.prevented)||("string"==typeof e&&o?o.updateLocation("#".concat(e)):"string"==typeof this.state.activeKey&&o&&o.updateLocation("#"),this.setState({activeKey:this.activeKey=e,prevKey:this.state.activeKey}),"string"==typeof r?(h=(0,i.uPQ)(r,"key","props"))&&h(e,this.props):"function"==typeof r&&r(e,this.props)),[2]}}))}))},t.prototype.doAction=function(e,t,a,n){void 0===a&&(a=!1);var s=null==e?void 0:e.actionType,i=Number(null==n?void 0:n.activeKey),o=h()(i)?null==n?void 0:n.activeKey:i,r=null==n?void 0:n.deleteHash;"changeActiveKey"===s?this.handleSelect("number"==typeof o?o-1:o):"deleteTab"===s&&this.handleClose(r,!0)},t.prototype.switchTo=function(e){var t=this.state.localTabs;Array.isArray(t)&&t[e]&&this.setState({activeKey:this.activeKey=t[e].hash||e})},t.prototype.currentIndex=function(){var e=this,t=this.state.localTabs;return Array.isArray(t)?d()(t,(function(t,a){return t.hash?t.hash===e.state.activeKey:a===e.state.activeKey})):-1},t.prototype.renderTabTitle=function(e,t,a){var s=this.props.render;return"string"!=typeof e&&e?s("tab-title/".concat(t),e,{data:(0,n.Cl)({index:t,__index:t},a)}):(0,i.pbD)(e,a)},t.prototype.renderToolbar=function(){var e=this.props,t=e.toolbar,a=e.render,o=e.classnames,r=e.toolbarClassName,l=e.id,d=e.themeCss;return t?s.createElement("div",{className:o("Tabs-toolbar",r,(0,i.NH8)((0,n.Cl)((0,n.Cl)({},this.props),{name:"toolbarControlClassName",id:l,themeCss:d})))},a("toolbar",t)):null},t.prototype.renderTabs=function(){var e=this,t=this.props,a=t.classnames,o=t.classPrefix,r=t.contentClassName,l=t.linksClassName,d=t.tabRender,c=t.className,h=t.style,p=t.render,y=t.data,v=t.mode,m=t.tabsMode,f=t.unmountOnExit,b=(t.source,t.formStore),C=t.formMode,g=t.formHorizontal,K=t.subFormMode,T=t.subFormHorizontal,S=t.addable,N=t.closable,A=t.draggable,x=t.showTip,O=t.showTipClassName,w=t.editable,E=t.sidePosition,z=t.translate,k=t.addBtnText,H=t.collapseOnExceed,B=t.collapseBtnLabel,F=t.disabled,I=t.mobileUI,D=t.swipeable,G=t.testIdBuilder,M=t.id,P=t.wrapperCustomStyle,U=t.themeCss,_=t.env,j=m||v,q=this.props.mountOnEnter;b&&(q=!1);var J=this.state,R=J.localTabs,V=[],L=[];return J.isFromSource?(V=R.map((function(t,o){var r,l,d=(0,i.ed2)(y,(0,i.Gvm)(t.data)?(0,n.Cl)({index:o},t.data):{item:t.data,index:o});return(0,i.zNq)(t,d)?s.createElement(u.oz,(0,n.Cl)({},t,{title:e.renderTabTitle(t.title,o,d),disabled:F||(0,i.d6x)(t,d),key:o,eventKey:(0,i.pbD)(t.hash,d)||o,prevKey:o>0?(null===(r=R[o-1])||void 0===r?void 0:r.hash)||o-1:0,nextKey:o<R.length-1?(null===(l=R[o+1])||void 0===l?void 0:l.hash)||o+1:R.length-1,swipeable:D,mobileUI:I,mountOnEnter:q,unmountOnExit:"boolean"==typeof t.reload?t.reload:"boolean"==typeof t.unmountOnExit?t.unmountOnExit:f,onSelect:e.handleSelect,testIdBuilder:null==G?void 0:G.getChild("tab-".concat("string"==typeof t.title?t.title:o)),className:a(t.className,(0,i.NH8)((0,n.Cl)((0,n.Cl)({},t),{name:"panelControlClassName",id:t.id,themeCss:t.themeCss})))}),p("item/".concat(o),(null==t?void 0:t.type)?t:t.tab||t.body,{disabled:F||(0,i.d6x)(t,d)||void 0,data:d,formMode:t.mode||K||C,formHorizontal:t.horizontal||T||g})):null})),L=R.map((function(t,a){var o=(0,i.ed2)(y,(0,i.Gvm)(t.data)?(0,n.Cl)({index:a},t.data):{item:t.data,index:a});return(0,i.zNq)(t,o)?s.createElement(i.z4D,(0,n.Cl)({},t,{config:{id:t.id,themeCss:t.themeCss,classNames:[{key:"panelControlClassName"}]},env:e.props.env,key:"customstyle_".concat(a)})):null}))):(V=R.map((function(t,o){var r,l;return(0,i.zNq)(t,y)?s.createElement(u.oz,(0,n.Cl)({},t,{title:e.renderTabTitle(t.title,o,y),disabled:F||(0,i.d6x)(t,y),key:o,eventKey:t.hash||o,prevKey:o>0?(null===(r=R[o-1])||void 0===r?void 0:r.hash)||o-1:0,nextKey:o<R.length-1?(null===(l=R[o+1])||void 0===l?void 0:l.hash)||o+1:R.length-1,swipeable:D,mobileUI:I,mountOnEnter:q,unmountOnExit:"boolean"==typeof t.reload?t.reload:"boolean"==typeof t.unmountOnExit?t.unmountOnExit:f,onSelect:e.handleSelect,testIdBuilder:null==G?void 0:G.getChild("tab-".concat("string"==typeof t.title?t.title:o)),className:a(t.className,(0,i.NH8)((0,n.Cl)((0,n.Cl)({},t),{name:"panelControlClassName",id:t.id,themeCss:t.themeCss})))}),e.renderTab?e.renderTab(t,e.props,o):d?d(t,e.props,o):p("tab/".concat(o),(null==t?void 0:t.type)?t:t.tab||t.body,{disabled:F||(0,i.d6x)(t,y)||void 0,formMode:t.mode||K||C,formHorizontal:t.horizontal||T||g})):null})),L=R.map((function(t,a){return(0,i.zNq)(t,y)?s.createElement(i.z4D,{config:{id:t.id,themeCss:t.themeCss,classNames:[{key:"panelControlClassName"}]},env:e.props.env,key:"customstyle_".concat(a)}):null}))),s.createElement(s.Fragment,null,s.createElement(u.tU,{addBtnText:z(k||"add"),classPrefix:o,classnames:a,mode:j,closable:N,className:a(c,(0,i.NH8)((0,n.Cl)((0,n.Cl)({},this.props),{name:"wrapperCustomStyle",id:M,themeCss:P}))),style:h,contentClassName:a(r,(0,i.NH8)((0,n.Cl)((0,n.Cl)({},this.props),{name:"contentControlClassName",id:M,themeCss:U}))),linksClassName:l,titleClassName:a((0,i.NH8)((0,n.Cl)((0,n.Cl)({},this.props),{name:"titleControlClassName",id:M,themeCss:U}))),onSelect:this.handleSelect,activeKey:this.state.activeKey,toolbar:this.renderToolbar(),addable:S,onAdd:this.handleAdd,onClose:this.handleClose,draggable:A,onDragChange:this.handleDragChange,showTip:x,showTipClassName:O,editable:w,onEdit:this.handleEdit,sidePosition:E,collapseOnExceed:H,collapseBtnLabel:B,mobileUI:I,testIdBuilder:G},V),L,s.createElement(i.z4D,(0,n.Cl)({},this.props,{config:{wrapperCustomStyle:P,id:M,themeCss:U,classNames:[{key:"titleControlClassName",weights:{default:{important:!0,inner:"> a"},focused:{important:!0,suf:".is-active",inner:"> a"},hover:{important:!0,inner:"> a"},disabled:{important:!0,suf:".is-disabled",inner:"> a"}}},{key:"toolbarControlClassName",weights:{default:{important:!0}}},{key:"contentControlClassName",weights:{default:{important:!0}}}]},env:_})))},t.prototype.render=function(){return this.renderTabs()},t.defaultProps={className:"",mode:"",mountOnEnter:!0,unmountOnExit:!1},(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Array,String,Object]),(0,n.Sn)("design:returntype",Array)],t.prototype,"initTabArray",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],t.prototype,"autoJumpToNeighbour",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],t.prototype,"handleAdd",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",Promise)],t.prototype,"handleClose",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Number,String]),(0,n.Sn)("design:returntype",void 0)],t.prototype,"handleEdit",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",Promise)],t.prototype,"handleDragChange",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",Promise)],t.prototype,"handleSelect",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Number]),(0,n.Sn)("design:returntype",void 0)],t.prototype,"switchTo",null),(0,n.Cg)([i.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",Number)],t.prototype,"currentIndex",null),t}(s.Component),y=function(e){function t(t,a){var n=e.call(this,t)||this;return a.registerComponent(n),n}return(0,n.C6)(t,e),t.prototype.componentWillUnmount=function(){var t;null===(t=e.prototype.componentWillUnmount)||void 0===t||t.call(this),this.context.unRegisterComponent(this)},t.contextType=i.MzX,(0,n.Cg)([(0,i.A49)({type:"tabs",onGlobalVarChanged:function(e,t,a){if((0,i.Vml)(t.source)){var s=(0,n.zs)(e.initTabArray(e.props.tabs,e.props.source,a),2),o=s[0],r=s[1];return e.setState({localTabs:o,isFromSource:r}),!1}}}),(0,n.Sn)("design:paramtypes",[Object,Object])],t)}(p)}}]);