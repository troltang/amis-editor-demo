(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[3642],{6048:function(e){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},6498:function(e,t,r){var n=r(42e3)((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));e.exports=n},42194:function(e,t,r){var n=r(15389),i=r(6048),o=r(71086);e.exports=function(e,t){return o(e,i(n(t)))}},53642:function(e,t,r){"use strict";r.r(t),r.d(t,{CRUDRenderer:function(){return x},CRUDRendererBase:function(){return D},default:function(){return O}});var n=r(31635),i=r(96540),o=r(2404),a=r.n(o),l=r(71086),s=r.n(l),d=r(42194),c=r.n(d),u=r(6498),p=r.n(u),h=r(62758),v=r(71121),m=r(44383),f=r.n(m),g=r(40961),b=r(90179),y=r.n(b),C=r(7309),F=r.n(C),S=r(50346),P=r(11331),I=r.n(P),T=r(50104),A=r.n(T),k=["selectedChange","columnSort","columnFilter","columnSearch","columnToggled","orderChange","rowClick","rowDbClick","rowMouseEnter","rowMouseLeave","selected"],O=function(e){function t(t){var r=e.call(this,t)||this;r.filterOnEvent=A()((function(e){return c()(e,(function(e,t){return!k.includes(t)}))})),r.controlRef=r.controlRef.bind(r),r.handleFilterReset=r.handleFilterReset.bind(r),r.handleFilterSubmit=r.handleFilterSubmit.bind(r),r.handleFilterInit=r.handleFilterInit.bind(r),r.handleAction=r.handleAction.bind(r),r.handleBulkAction=r.handleBulkAction.bind(r),r.handleChangePage=r.handleChangePage.bind(r),r.handleBulkGo=r.handleBulkGo.bind(r),r.handleDialogConfirm=r.handleDialogConfirm.bind(r),r.handleDialogClose=r.handleDialogClose.bind(r),r.handleItemChange=r.handleItemChange.bind(r),r.handleSave=r.handleSave.bind(r),r.handleSaveOrder=r.handleSaveOrder.bind(r),r.handleSelect=r.handleSelect.bind(r),r.handleChildPopOverOpen=r.handleChildPopOverOpen.bind(r),r.handleChildPopOverClose=r.handleChildPopOverClose.bind(r),r.search=r.search.bind(r),r.silentSearch=r.silentSearch.bind(r),r.handleQuery=r.handleQuery.bind(r),r.renderHeaderToolbar=r.renderHeaderToolbar.bind(r),r.renderFooterToolbar=r.renderFooterToolbar.bind(r),r.clearSelection=r.clearSelection.bind(r),r.filterItemIndex=r.filterItemIndex.bind(r);var n,i=t.location,o=t.store,a=t.pageField,l=t.perPageField,s=t.syncLocation,d=(t.loadDataOnce,r.getParseQueryOptions(t));return r.mounted=!0,s&&i&&(i.query||i.search)?o.updateQuery((0,h.mAk)(i,d),void 0,a,l):s&&!i&&window.location.search&&o.updateQuery((0,h.mAk)(window.location,d),void 0,a,l),r.props.store.setFilterTogglable(!!r.props.filterTogglable,r.props.filterDefaultVisible),r.props.api&&r.props.store.updateData({items:[]}),r.props.pickerMode&&(n=(0,h.$_G)(r.props))&&r.syncSelectedFromPicker(n),r}return(0,n.C6)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.store,r=e.autoGenerateFilter,n=e.perPageField;e.columns,this.props.perPage&&!t.query[n||"perPage"]&&t.changePage(t.page,this.props.perPage),(!this.props.filter&&!r||t.filterTogggable&&!t.filterVisible)&&this.handleFilterInit({}),this.parentContainer=this.getClosestParentContainer()},t.prototype.componentDidUpdate=function(e){var t,r,n=this.props,i=e.store;(0,h.TIf)(["toolbar","headerToolbar","footerToolbar","bulkActions"],e,n)&&(this.renderHeaderToolbar=this.renderHeaderToolbar.bind(this),this.renderFooterToolbar=this.renderFooterToolbar.bind(this)),!this.props.pickerMode||a()(r=(0,h.$_G)(this.props),(0,h.$_G)(e))||a()(r,i.selectedItems.concat())||this.syncSelectedFromPicker(r),!!this.props.filterTogglable!=!!e.filterTogglable&&i.setFilterTogglable(!!n.filterTogglable,n.filterDefaultVisible);var o=!1;if(e.syncLocation&&e.location&&e.location.search!==n.location.search&&(i.updateQuery((0,h.mAk)(n.location,this.getParseQueryOptions(n)),void 0,n.pageField,n.perPageField),o=!(!n.api||!(0,h.JQ)(i.query,this.lastQuery,!1))),o);else if(e.api&&n.api&&(0,h.B92)(e.api,n.api,i.fetchCtxOf(e.data,{pageField:e.pageField,perPageField:e.perPageField}),i.fetchCtxOf(n.data,{pageField:n.pageField,perPageField:n.perPageField})))o=!0;else if(!n.api&&(0,h.joH)(n.source)&&n.data!==e.data){var l=(0,h.GvO)(n.source,n.data,"| raw");this.lastData&&this.lastData===l||(i.initFromScope(n.data,n.source,{columns:null!==(t=i.columns)&&void 0!==t?t:n.columns}),this.props.pickerMode&&(r=(0,h.$_G)(this.props))&&this.syncSelectedFromPicker(r),this.lastData=l)}o&&this.search()},t.prototype.componentWillUnmount=function(){var e,t;this.mounted=!1,clearTimeout(this.timer),null===(t=(e=this.filterOnEvent.cache).clear)||void 0===t||t.call(e)},t.prototype.getParseQueryOptions=function(e){var t,r=e.parsePrimitiveQuery;return{parsePrimitive:!!((0,h.Gvm)(r)?null==r?void 0:r.enable:r),primitiveTypes:null!==(t=null==r?void 0:r.types)&&void 0!==t?t:["boolean"]}},t.prototype.getClosestParentContainer=function(){var e=(0,g.findDOMNode)(this);return null==e?void 0:e.closest("[role=dialog]")},t.prototype.controlRef=function(e){for(;e&&e.getWrappedInstance;)e=e.getWrappedInstance();this.control=e},t.prototype.handleAction=function(e,t,r,i,o){var a=this;void 0===i&&(i=!1);var l=this.props,s=l.onAction,d=l.store,c=l.messages,u=l.pickerMode,p=l.env,v=(l.pageField,l.stopAutoRefreshWhenModalIsOpen);if(!d.loading){if("dialog"===t.actionType){d.setCurrentAction(t,this.props.resolveDefinitions);var m=r.index,f=d.items.length;return v&&clearTimeout(this.timer),new Promise((function(e){d.openDialog(r,{hasNext:m<f-1,nextIndex:m+1,hasPrev:m>0,prevIndex:m-1,index:m},(function(r,n){var i;null===(i=t.callback)||void 0===i||i.call(t,r,n),e({confirmed:r,value:n})}),o||a.context)}))}if("ajax"===t.actionType){d.setCurrentAction(t,this.props.resolveDefinitions);var g=r,b=t.redirect&&(0,h.pbD)(t.redirect,g);if(b&&t.blank&&p.jumpTo(b,t,g),!(0,h.Amo)(t.api,g))return;return d.saveRemote(t.api,g,{successMessage:t.messages&&t.messages.success||c&&c.saveSuccess,errorMessage:t.messages&&t.messages.failed||c&&c.saveFailed}).then((function(e){return(0,n.sH)(a,void 0,void 0,(function(){var i,o;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return i=(0,h.ed2)(r,e),t.feedback&&(0,h.zNq)(t.feedback,i)?[4,this.openFeedback(t.feedback,i)]:[3,2];case 1:n.sent(),v&&clearTimeout(this.timer),n.label=2;case 2:return(o=t.redirect&&(0,h.pbD)(t.redirect,i))&&!t.blank&&p.jumpTo(o,t,i),t.reload?this.reloadTarget((0,h.Wvn)(t.reload,i),i):!o&&this.search(void 0,void 0,!0,!0),t.close&&this.closeTarget(t.close),[2]}}))}))})).catch((function(e){if(i||t.countDown)throw e}))}if("reload"!==t.actionType||t.target){if(u&&("confirm"===t.actionType||"submit"===t.actionType))return d.setCurrentAction(t,this.props.resolveDefinitions),Promise.resolve({items:d.selectedItems.concat()});if(t.onClick){d.setCurrentAction(t,this.props.resolveDefinitions);var y=t.onClick;"string"==typeof y&&(y=(0,h.sce)(y,"event","props","data")),y&&y(e,this.props,r)}else s(e,t,r,i,o||this.context)}else this.reload()}},t.prototype.handleBulkAction=function(e,t,r,i){var o,a=this,l=this.props,s=l.store,d=l.primaryField,c=l.onAction,u=l.messages,p=l.pageField,v=l.stopAutoRefreshWhenModalIsOpen,m=l.env;if(e.length||!1===i.requireSelected){var f=e.map((function(e){return e.hasOwnProperty(d)?e[d]:null})).filter((function(e){return e})).join(","),g=(0,h.Rn2)([s.mergedData,{event:r},(0,n.Cl)((0,n.Cl)((0,n.Cl)({},e[0]),s.eventContext),{currentPageData:((null===(o=s.mergedData)||void 0===o?void 0:o.items)||[]).concat(),rows:e,items:e,ids:f})]),b=function(){if("dialog"===i.actionType)return a.handleAction(r,(0,n.Cl)((0,n.Cl)({},i),{__from:"bulkAction"}),g);"ajax"===i.actionType?(0,h.Amo)(i.api,g)&&s.saveRemote(i.api,g,{successMessage:i.messages&&i.messages.success||u&&u.saveSuccess,errorMessage:i.messages&&i.messages.failed||u&&u.saveFailed}).then((function(e){return(0,n.sH)(a,void 0,void 0,(function(){var t,r,o;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return t=(0,h.ed2)(g,e),i.feedback&&(0,h.zNq)(i.feedback,t)?[4,this.openFeedback(i.feedback,t)]:[3,2];case 1:n.sent(),v&&clearTimeout(this.timer),n.label=2;case 2:return i.reload?this.reloadTarget((0,h.Wvn)(i.reload,t),t):this.search(((o={})[p||"page"]=1,o),void 0,!0,!0),i.close&&this.closeTarget(i.close),(r=i.redirect&&(0,h.pbD)(i.redirect,t))&&m.jumpTo(r,i,t),[2]}}))}))})).catch((function(){return null})):c&&c(r,i,g,!1,a.context)},y="";!i.ignoreConfirm&&i.confirmText&&m.confirm&&(y=(0,h.pbD)(i.confirmText,g))?m.confirm(y,(0,h.pbD)(i.confirmTitle,g)||void 0).then((function(e){return e&&b()})):b()}},t.prototype.handleItemAction=function(e,t){this.doAction(e,t)},t.prototype.handleFilterInit=function(e){var t,r=this.props,i=r.defaultParams,o=r.columns,a=r.matchFunc,l=r.store,s=r.orderBy,d=r.orderDir,c=(r.dispatchEvent,(0,n.Cl)({},i));s&&(c.orderBy=s,c.orderDir=d||"asc"),this.handleFilterSubmit((0,n.Cl)((0,n.Cl)((0,n.Cl)({},c),e),l.query),!1,!0,!1!==this.props.initFetch,!0),l.setPristineQuery();var u,p=this.props,v=p.pickerMode,m=p.options;v&&(l.initFromScope({items:m||[]},"${items}",{columns:null!==(t=l.columns)&&void 0!==t?t:o,matchFunc:a}),(u=(0,h.$_G)(this.props))&&this.syncSelectedFromPicker(u))},t.prototype.handleFilterReset=function(e,t){var r=this.props,i=r.store,o=r.syncLocation,a=r.env,l=r.pageField,s=r.perPageField,d={};Object.keys(e).forEach((function(e){return d[e]=""})),i.updateQuery((0,n.Cl)((0,n.Cl)({},d),i.pristineQuery),o&&a&&a.updateLocation?function(e){return a.updateLocation(e)}:void 0,l,s,!0),this.lastQuery=i.query,(null==t?void 0:t.actionType)&&["reset-and-submit","clear-and-submit","submit"].includes(t.actionType)||this.search()},t.prototype.handleFilterSubmit=function(e,t,r,i,o){var a,l,d;void 0===t&&(t=!0),void 0===r&&(r=!1),void 0===i&&(i=!0),void 0===o&&(o=!1);var c=this.props,u=c.store,p=c.syncLocation,v=c.env,m=c.pageField,f=c.perPageField,g=c.loadDataOnceFetchOnFilter,b=c.parsePrimitiveQuery,y=this.getParseQueryOptions(this.props);e=(0,n.Cl)((0,n.Cl)({},e),s()(null!==(d=null===(l=null==e?void 0:e.__super)||void 0===l?void 0:l.diff)&&void 0!==d?d:{},(function(e){return void 0===e}))),e=p?(0,h.gji)((0,h.Eqn)(e,void 0,!0)):e,b&&(e=(0,h.kCf)(e,y)),u.updateQuery((0,n.Cl)((0,n.Cl)({},e),((a={})[m||"page"]=t?1:u.page,a)),p&&v&&v.updateLocation?function(e){return v.updateLocation(e,r)}:void 0,m,f),this.lastQuery=u.query,i&&this.search(void 0,void 0,void 0,!1!==g,o)},t.prototype.handleBulkGo=function(e,t,r){var n=this,i=this.props.store.selectedAction,o=this.props.env,a="";return i.confirmText&&(a=(0,h.pbD)(i.confirmText,this.props.store.mergedData))?o.confirm(a).then((function(o){return o&&n.handleBulkAction(e,t,r,i)})):this.handleBulkAction(e,t,r,i)},t.prototype.handleDialogConfirm=function(e,t,r,i){var o,a,l,s,d=this.props,c=d.store,u=d.pageField,p=d.stopAutoRefreshWhenModalIsOpen,v=d.interval,m=d.silentPolling,f=d.env;c.closeDialog(!0,e);var g=c.action;if(p&&v&&(this.timer=setTimeout(m?this.silentSearch:this.search,Math.max(v,1e3))),"next"===t.actionType&&"number"==typeof r.nextIndex&&c.data.items[r.nextIndex])return this.handleAction(void 0,(0,n.Cl)({},g),(0,h.ed2)((0,h.ed2)(c.data,{index:r.nextIndex}),c.data.items[r.nextIndex]));if("prev"===t.actionType&&"number"==typeof r.prevIndex&&c.data.items[r.prevIndex])return this.handleAction(void 0,(0,n.Cl)({},g),(0,h.ed2)((0,h.ed2)(c.data,{index:r.prevIndex}),c.data.items[r.prevIndex]));if(e.length){var b=e[0];r=(0,h.ed2)(r,b);var y=i[0];y&&"form"===y.props.type&&(b&&b.__saved?(null!==(a=t.reload)&&void 0!==a?a:g.reload)||this.search(g.__from?((o={})[u||"page"]=1,o):void 0,void 0,!0,!0):b&&(b.hasOwnProperty("items")&&b.items||b.hasOwnProperty("ids"))&&this.control.bulkUpdate&&this.control.bulkUpdate(b,b.items))}var C=null!==(l=t.reload)&&void 0!==l?l:g.reload;C&&this.reloadTarget((0,h.Wvn)(C,r),r);var F=null!==(s=t.redirect)&&void 0!==s?s:g.redirect;(F=F&&(0,h.pbD)(F,r))&&f.jumpTo(F,g,r)},t.prototype.handleDialogClose=function(e){void 0===e&&(e=!1);var t=this.props,r=t.store,n=t.stopAutoRefreshWhenModalIsOpen,i=t.silentPolling,o=t.interval;r.closeDialog(e),n&&o&&(this.timer=setTimeout(i?this.silentSearch:this.search,Math.max(o,1e3)))},t.prototype.openFeedback=function(e,t){var r=this;return new Promise((function(n){var i=r.props.store;i.setCurrentAction({type:"button",actionType:"dialog",dialog:e},r.props.resolveDefinitions),i.openDialog(t,void 0,(function(e){n(e)}),r.context)}))},t.prototype.search=function(e,t,r,i,o){var a,l,s,d;return void 0===i&&(i=!1),void 0===o&&(o=!1),(0,n.sH)(this,void 0,void 0,(function(){var c,u,p,v,m,f,g,b,y,C,F,P,I,T,A,k,O,D,x,w,M,R,B,E,N,Q,H,_,L,q;return(0,n.YH)(this,(function(U){switch(U.label){case 0:return c=this.props,u=c.store,p=c.api,v=c.messages,m=c.pageField,f=c.perPageField,g=c.interval,b=c.stopAutoRefreshWhen,y=c.stopAutoRefreshWhenModalIsOpen,C=c.silentPolling,F=c.syncLocation,P=c.syncResponse2Query,I=c.pickerMode,T=c.env,A=c.loadDataOnce,k=c.loadDataOnceFetchOnFilter,O=c.source,D=c.columns,x=c.dispatchEvent,r&&!I&&u.resetSelection(),w="",e&&"string"==typeof e.loadDataMode&&(w="load-more",delete e.loadDataMode),clearTimeout(this.timer),e&&u.updateQuery(e,!w&&F&&T&&T.updateLocation?T.updateLocation:void 0,m,f),this.lastQuery=u.query,M=(0,h.ed2)(u.data,u.query),R=(null===(a=this.props)||void 0===a?void 0:a.matchFunc)&&"string"==typeof this.props.matchFunc?(0,h.sce)(this.props.matchFunc,"items","itemsRaw","options"):void 0,(0,h.Amo)(p,M)?[4,u.fetchInitData(p,M,{successMessage:v&&v.fetchSuccess,errorMessage:v&&v.fetchFailed,autoAppend:!0,forceReload:i,loadDataOnce:A,source:O,silent:t,pageField:m,perPageField:f,loadDataMode:w,syncResponse2Query:P,columns:null!==(l=u.columns)&&void 0!==l?l:D,matchFunc:R,filterOnAllColumns:!1===k})]:[3,8];case 1:return B=U.sent(),(0,S._n)(u)?(E=u.page,N=u.lastPage,Q=u.msg,H=u.error,o?[4,null==x?void 0:x("fetchInited",(0,h.ed2)(this.props.data,{responseData:(null==B?void 0:B.ok)?null!==(s=u.data)&&void 0!==s?s:{}:B,responseStatus:void 0===(null==B?void 0:B.status)?H?1:0:null==B?void 0:B.status,responseMsg:Q}))]:[3,3]):[2,B];case 2:return(null==(_=U.sent())?void 0:_.prevented)?[2,u.data]:[3,5];case 3:return[4,null==x?void 0:x("research",(0,h.ed2)(this.props.data,{responseData:(null==B?void 0:B.ok)?null!=M?M:{}:B,responseStatus:void 0===(null==B?void 0:B.status)?H?1:0:null==B?void 0:B.status,responseMsg:Q}))];case 4:if(null==(_=U.sent())?void 0:_.prevented)return[2];U.label=5;case 5:return!A&&!u.data.items.length&&!g&&E>1&&N<E?[4,this.search((0,n.Cl)((0,n.Cl)({},u.query),(q={},q[m||"page"]=N,q)),!1,void 0)]:[3,7];case 6:U.sent(),U.label=7;case 7:return(null==B?void 0:B.ok)&&g&&this.mounted&&(!b||!(y&&u.hasModalOpened||(0,h.pgu)(b,(0,h.ed2)(u.data,u.query))))&&(this.timer=setTimeout(C?this.silentSearch.bind(this,void 0,void 0,!0):this.search.bind(this,void 0,void 0,void 0,!0),Math.max(g,1e3))),[3,9];case 8:O&&u.initFromScope(M,O,{columns:null!==(d=u.columns)&&void 0!==d?d:D,matchFunc:R}),U.label=9;case 9:return this.props.pickerMode&&(L=(0,h.$_G)(this.props))&&this.syncSelectedFromPicker(L),[2,u.data]}}))}))},t.prototype.silentSearch=function(e,t,r){return void 0===r&&(r=!1),this.search(e,!0,t,r)},t.prototype.handleChangePage=function(e,t,r){var i;return(0,n.sH)(this,void 0,void 0,(function(){var o,a,l,s,d,c,u,p,h,m,f,b,y,C;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return o=this.props,a=o.store,l=o.syncLocation,s=o.env,d=o.pageField,c=o.perPageField,u=o.pageDirectionField,p=o.autoJumpToTopOnPagerChange,h=o.translate,m=o.api,f=o.loadDataOnce,m&&!f&&(null===(i=this.control)||void 0===i?void 0:i.hasModifiedItems())?[4,(0,v.lJ)(h("CRUD.confirmLeaveUnSavedPage"))]:[3,2];case 1:if(!n.sent())return[2];n.label=2;case 2:return(C={})[d||"page"]=e,b=C,r&&(b[u||"pageDir"]=r),t&&(b[c||"perPage"]=t),a.updateQuery(b,l&&(null==s?void 0:s.updateLocation)?s.updateLocation:void 0,d,c),this.search(void 0,void 0,void 0),p&&this.control&&(this.control.scrollToTop?this.control.scrollToTop():((0,g.findDOMNode)(this.control).scrollIntoView(),(y=window.scrollY)&&window.scroll(0,y))),[2]}}))}))},t.prototype.syncSelectedFromPicker=function(e){var t=this.props,r=t.store,n=t.primaryField,i=t.strictMode,o=e.map((function(e){var t;return I()(e)||((t={})[n||"id"]=e,e=t),(0,h.cym)(r.items,(function(t){return function(e,t){var r=e[n||"id"],o=t[n||"id"];return!!(e===t||r&&(i?r===o:r==o))}(t,e)}))||e}));this.props.store.setSelectedItems(o)},t.prototype.handleItemChange=function(e,t,r){var n=this.props.store,i="".concat(r).split(".").map((function(e){return parseInt(e,10)})),o=(0,h.Z6D)(n.items,i,1,e);n.replaceItems(o)},t.prototype.handleSave=function(e,t,r,i,o,a){var l=this,s=this.props,d=s.store,c=s.quickSaveApi,u=s.quickSaveItemApi,p=s.primaryField,v=s.env,m=s.messages,f=s.reload,g=s.dispatchEvent;if(Array.isArray(e)){if(!(0,h.Amo)(c))return void(v&&v.alert("CRUD quickSaveApi is required"));var b=(0,h.ed2)(d.data,{rows:e,rowsDiff:t,indexes:r,rowsOrigin:o});return e.length&&e[0].hasOwnProperty(p||"id")&&(b.ids=e.map((function(e){return e[p||"id"]})).join(",")),i&&(b.unModifiedItems=i),d.saveRemote(c,b,{successMessage:m&&m.saveFailed,errorMessage:m&&m.saveSuccess}).then((function(e){return(0,n.sH)(l,void 0,void 0,(function(){var t,r,i;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return e?[4,null==g?void 0:g("quickSaveSucc",(0,h.C5M)(b,{result:e}))]:[2];case 1:return(null==(t=n.sent())?void 0:t.prevented)?[2]:[2,(r=null!==(i=null==a?void 0:a.reload)&&void 0!==i?i:f)?this.reloadTarget((0,h.Wvn)(r,b),b):this.search(void 0,void 0,!0,!0)]}}))}))})).catch((function(e){return(0,n.sH)(l,void 0,void 0,(function(){return(0,n.YH)(this,(function(t){switch(t.label){case 0:return[4,null==g?void 0:g("quickSaveFail",(0,h.ed2)(this.props.data,{error:e}))];case 1:return t.sent(),[2]}}))}))}))}if((0,h.Amo)(u)){var y=(0,h.ed2)(d.data,{item:e,modified:t,origin:o}),C=(0,h.ed2)(y,e);return d.saveRemote(u,C).then((function(e){return(0,n.sH)(l,void 0,void 0,(function(){var t,r,i;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return e?[4,null==g?void 0:g("quickSaveItemSucc",(0,h.C5M)(y,{result:e}))]:[2];case 1:return(null==(t=n.sent())?void 0:t.prevented)?[2]:[2,(r=null!==(i=null==a?void 0:a.reload)&&void 0!==i?i:f)?this.reloadTarget((0,h.Wvn)(r,y),y):this.search(void 0,void 0,!0,!0)]}}))}))})).catch((function(e){return(0,n.sH)(l,void 0,void 0,(function(){return(0,n.YH)(this,(function(t){switch(t.label){case 0:return(null==a?void 0:a.resetOnFailed)&&this.control.reset(),[4,null==g?void 0:g("quickSaveItemFail",(0,h.ed2)(this.props.data,{error:e}))];case 1:return t.sent(),[2]}}))}))}))}v&&v.alert("CRUD quickSaveItemApi is required!")},t.prototype.handleSaveOrder=function(e,t){var r=this,i=this.props,o=i.store,a=i.saveOrderApi,l=i.orderField,s=i.primaryField,d=i.env,c=i.reload,u=i.dispatchEvent;if(a){var p,v,m=(0,h.ed2)(o.data),g=[],b=s&&t[0]&&t[0].hasOwnProperty(s);if(b||(m.idMap={}),m.insertAfter={},t.forEach((function(r){if(~e.indexOf(r))if(p){var n=b?p[s]:t.indexOf(p);m.insertAfter[n]=m.insertAfter[n]||[],b||(m.idMap[n]=p),m.insertAfter[n].push(b?r[s]:r)}else g.push(r);else p=r,v=v||r})),v&&g.length){var y=b?v[s]:t.indexOf(v);b||(m.idMap[y]=v),m.insertBefore={},m.insertBefore[y]=g.map((function(e){return b?e[s]:e}))}else if(g.length){var C=g[0],F=b?C[s]:t.indexOf(C);b||(m.idMap[F]=C),m.insertAfter[F]=g.slice(1).map((function(e){return b?e[s]:e}))}if(l){var S=(o.page-1)*o.perPage||0;t=(0,h.X$u)(t,(function(e,t,r){var n;return(0,h.C5M)(e,((n={})[l]=(1===r?S:0)+t+1,n))}))}if(m.rows=t.concat(),b){var P=function(e){return e.map((function(e){return"".concat(e[s]).concat(Array.isArray(e.children)&&e.children.length?"[".concat(P(e.children),"]"):"")})).join(",")};m.ids=P(t),l&&(m.order=(0,h.X$u)(t,(function(e){return f()(e,[s,l,"children"])})))}return(0,h.Amo)(a,m)&&o.saveRemote(a,m).then((function(e){return(0,n.sH)(r,void 0,void 0,(function(){var t;return(0,n.YH)(this,(function(r){switch(r.label){case 0:return e?[4,null==u?void 0:u("saveOrderSucc",(0,h.C5M)(m,{result:e}))]:[2];case 1:return(null==(t=r.sent())?void 0:t.prevented)||(c&&this.reloadTarget((0,h.Wvn)(c,m),m),this.search(void 0,void 0,!0,!0)),[2]}}))}))})).catch((function(e){return(0,n.sH)(r,void 0,void 0,(function(){return(0,n.YH)(this,(function(t){switch(t.label){case 0:return[4,null==u?void 0:u("saveOrderFail",(0,h.ed2)(this.props.data,{error:e}))];case 1:return t.sent(),[2]}}))}))}))}d&&d.alert("CRUD saveOrderApi is required!")},t.prototype.handleSelect=function(e,t){var r=this.props,n=r.store,i=r.keepItemSelectionOnPageChange,o=r.primaryField,a=r.multiple,l=r.pickerMode,s=r.strictMode,d=r.onSelect,c=e;if(i&&n.selectedItems.length){var u;u=n.items.length>e.length+t.length?function(e,t){return(e.__pristine||e)===(t.__pristine||t)}:function(e,t){var r=e[o||"id"],n=t[o||"id"];return e===t||r&&(s?r===n:r==n)};var p=e.concat();c=n.selectedItems.map((function(e){var r=p.findIndex((function(t){return u(t,e)}));return~r?p.splice(r,1)[0]:(0,h.cym)(t,(function(t){return u(t,e)}))?null:e})).filter((function(e){return e})).concat(p)}var v=n.items.filter((function(e){return!c.find((function(t){return(t.__pristine||t)===e}))})).map((function(e){return t.find((function(t){return t.__pristine===e}))||e}));l&&!1===a&&c.length>1&&v.push.apply(v,c.splice(0,c.length-1)),n.setSelectedItems(c),n.setUnSelectedItems(v),d&&d(c,v)},t.prototype.handleChildPopOverOpen=function(e){this.props.interval&&e&&~["dialog","drawer"].indexOf(e.mode)&&(this.props.stopAutoRefreshWhenModalIsOpen&&clearTimeout(this.timer),this.props.store.setInnerModalOpened(!0))},t.prototype.handleChildPopOverClose=function(e){var t=this.props,r=t.stopAutoRefreshWhenModalIsOpen,n=t.silentPolling,i=t.interval;e&&~["dialog","drawer"].indexOf(e.mode)&&(this.props.store.setInnerModalOpened(!1),r&&i&&(this.timer=setTimeout(n?this.silentSearch:this.search,Math.max(i,1e3))))},t.prototype.handleQuery=function(e,t,r,i,o){var a,l=this.props,s=l.store,d=l.syncLocation,c=l.env,u=l.pageField,p=l.perPageField,h=l.loadDataOnceFetchOnFilter;return s.updateQuery(i?(0,n.Cl)(((a={})[u||"page"]=1,a),e):e,d&&c&&c.updateLocation?c.updateLocation:void 0,u,p,r),this.search(void 0,void 0,null!=o?o:r,null!=t?t:!0===h)},t.prototype.reload=function(e,t,r,n,i,o){return t?this.receive(t,void 0,i,null==o?void 0:o.resetPage,!0):this.search(void 0,void 0,!0,!0)},t.prototype.receive=function(e,t,r,n,i){return this.handleQuery(e,!0,r,n,i)},t.prototype.reloadTarget=function(e,t){},t.prototype.closeTarget=function(e){},t.prototype.doAction=function(e,t,r,i){var o;return void 0===r&&(r=!1),(0,n.sH)(this,void 0,void 0,(function(){var a,l,s;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return a=this.props.store,e.actionType&&["submitQuickEdit","toggleExpanded","setExpanded","initDrag","cancelDrag","selectAll","clearAll"].includes(e.actionType)?[2,null===(o=this.control)||void 0===o?void 0:o.doAction(e,t,r,i)]:[3,1];case 1:return"select"!==e.actionType?[3,3]:[4,(0,h.dBT)(a.items,t,null==i?void 0:i.index,null==i?void 0:i.condition)];case 2:return l=n.sent(),s=a.items.filter((function(e){return!l.includes(e)})),[2,this.handleSelect(l,s)];case 3:return[2,this.handleAction(void 0,e,t,r)]}}))}))},t.prototype.unSelectItem=function(e,t){var r=this.props.store,n=r.selectedItems.concat(),i=r.unSelectedItems.concat(),o=n.indexOf(e);~o&&i.push.apply(i,n.splice(o,1)),r.setSelectedItems(n),r.setUnSelectedItems(i)},t.prototype.clearSelection=function(){var e=this.props,t=e.store,r=e.itemCheckableOn,i=(0,n.zs)(p()(t.selectedItems,(function(e){return!r||(0,h.pgu)(r,e)})),2),o=i[0],a=i[1],l=t.unSelectedItems.concat(o);t.setSelectedItems(a),t.setUnSelectedItems(l)},t.prototype.hasBulkActionsToolbar=function(){var e=this.props,t=e.headerToolbar,r=e.footerToolbar,n=function(e){return~["bulkActions","bulk-actions"].indexOf(e.type||e)};return Array.isArray(t)&&F()(t,n)||Array.isArray(r)&&F()(r,n)},t.prototype.hasBulkActions=function(){var e=this.props,t=e.bulkActions,r=(e.itemActions,e.store);if(!t||!t.length)return!1;var i=[],o=r.mergedData;return t&&t.length&&(i=t.map((function(e){return(0,n.Cl)((0,n.Cl)({},e),(0,h.x_4)(e,o))})).filter((function(e){return!e.hidden&&!1!==e.visible}))),i.length},t.prototype.renderBulkActions=function(e){var t,r=this,o=this.props,a=o.bulkActions,l=o.itemActions,s=o.store,d=o.render,c=o.classnames,u=o.primaryField;if(!a||!a.length)return null;var p=s.selectedItems,v=s.unSelectedItems,m=[],f=[],g=(0,h.ed2)(s.mergedData,(0,n.Cl)((0,n.Cl)({currentPageData:((null===(t=s.mergedData)||void 0===t?void 0:t.items)||[]).concat()},s.eventContext),{rows:p.concat(),items:p.concat(),ids:p.map((function(e){return e.hasOwnProperty(u)?e[u]:null})).filter((function(e){return e})).join(",")}));a&&a.length&&(!l||!l.length||p.length>1)&&(m=a.map((function(e){return(0,n.Cl)((0,n.Cl)({},e),(0,h.x_4)(e,g))})).filter((function(e){return!e.hidden&&!1!==e.visible})));var b=(0,h.ed2)(s.data,p.length?p[0]:{});return l&&p.length<=1&&(f=l.map((function(e){return(0,n.Cl)((0,n.Cl)({},e),(0,h.x_4)(e,b))})).filter((function(e){return!e.hidden&&!1!==e.visible}))),m.length||f.length?i.createElement("div",{className:c("Crud-actions")},m.map((function(e,t){return d("bulk-action/".concat(t),(0,n.Cl)((0,n.Cl)({},y()(e,["visibleOn","hiddenOn","disabledOn"])),{type:e.type||"button",ignoreConfirm:!0}),{key:"bulk-".concat(t),data:g,disabled:e.disabled||!1!==e.requireSelected&&!p.length,onAction:r.handleBulkAction.bind(r,p.concat(),v.concat())})})),f.map((function(e,t){return d("bulk-action/".concat(t),(0,n.Cl)((0,n.Cl)({},y()(e,["visibleOn","hiddenOn","disabledOn"])),{type:"button"}),{key:"item-".concat(t),data:b,disabled:e.disabled||1!==p.length,onAction:r.handleItemAction.bind(r,e,b)})}))):null},t.prototype.renderPagination=function(e){var t=this.props,r=t.store,o=t.render,a=t.classnames,l=t.alwaysShowPagination,s=t.perPageAvailable,d=t.testIdBuilder,c=r.page,u=r.lastPage;if("simple"!==r.mode&&r.lastPage<2&&!l)return null;var p={};if(Array.isArray(s)&&(p.perPageAvailable=s),"string"!=typeof e){Object.assign(p,e);var v=e.showPageInput;p.showPageInput=!0===v||u>9&&null==v,p.total=(0,h.GvO)(e.total,r.data)}else p.showPageInput=u>9;return i.createElement("div",{className:a("Crud-pager")},o("pagination",{type:"pagination",testIdBuilder:null==d?void 0:d.getChild("pagination")},(0,n.Cl)((0,n.Cl)({},p),{activePage:c,lastPage:u,hasNext:r.hasNext,mode:r.mode,perPage:r.perPage,popOverContainer:this.parentContainer,onPageChange:this.handleChangePage})))},t.prototype.renderStatistics=function(){var e=this.props,t=e.store,r=e.classnames,n=e.translate,o=e.alwaysShowPagination;return t.lastPage<=1&&!o?null:i.createElement("div",{className:r("Crud-statistics")},n("CRUD.stat",{page:t.page,lastPage:t.lastPage,total:t.total}))},t.prototype.renderSwitchPerPage=function(e){var t=this,r=this.props,n=r.mobileUI,o=r.store,a=r.perPageAvailable,l=r.classnames,s=r.classPrefix,d=r.translate,c=r.testIdBuilder;if(!e.items.length)return null;var u=n?(a||[5,10,20,50,100]).map((function(e){return{label:e+" 条/页",value:e+""}})):(a||[5,10,20,50,100]).map((function(e){return{label:e,value:e+""}}));return i.createElement("div",{className:l("Crud-pageSwitch")},n?null:i.createElement("span",null,d("CRUD.perPage")),i.createElement(v.l6,{classPrefix:s,searchable:!1,placeholder:d("Select.placeholder"),options:u,value:o.perPage+"",onChange:function(e){return t.handleChangePage(1,e.value)},clearable:!1,popOverContainer:this.parentContainer,testIdBuilder:null==c?void 0:c.getChild("perPage")}))},t.prototype.renderLoadMore=function(){var e=this,t=this.props,r=t.store,o=t.classPrefix,a=t.classnames,l=t.translate,s=t.testIdBuilder,d=r.page,c=r.lastPage;return i.createElement("div",{className:a("Crud-loadMore")},i.createElement(v.$n,(0,n.Cl)({disabled:d>=c,disabledTip:l("CRUD.loadMoreDisableTip"),classPrefix:o,onClick:function(){return e.search({page:d+1,loadDataMode:"load-more"})},size:"sm"},null==s?void 0:s.getChild("loadMore").getTestId()),l("CRUD.loadMore")))},t.prototype.renderFilterToggler=function(){var e,t,r,o=this.props,a=o.store,l=o.classnames,s=o.translate,d=o.filterTogglable;if(!a.filterTogggable)return null;var c=I()(d)?(0,n.Cl)({},d):{};return a.filterVisible&&(c.icon=null!==(e=c.activeIcon)&&void 0!==e?e:c.icon,c.label=null!==(t=c.activeLabel)&&void 0!==t?t:c.label),i.createElement("button",{onClick:function(){return a.setFilterVisible(!a.filterVisible)},className:l("Button Button--size-default Button--default",{"is-active":a.filterVisible})},c.icon?i.createElement(v.In,{icon:c.icon,className:"icon m-r-xs"}):!1!==(null==c?void 0:c.icon)?i.createElement(v.In,{icon:"filter",className:"icon m-r-xs"}):null,null!==(r=null==c?void 0:c.label)&&void 0!==r?r:s("CRUD.filter"))},t.prototype.renderExportCSV=function(e){var t=this.props,r=t.store,n=t.classPrefix,o=t.translate,a=t.loadDataOnce,l=e.api,s=e.filename;return i.createElement(v.$n,{classPrefix:n,onClick:function(){return r.exportAsCSV({loadDataOnce:a,api:l,filename:s,data:r.filterData})}},e.label||o("CRUD.exportCSV"))},t.prototype.renderToolbar=function(e,t,r,o){var a=this;if(void 0===t&&(t=0),void 0===r&&(r={}),!e)return null;var l=this.props,s=l.render,d=l.store,c=l.mobileUI,u=l.translate,p=l.testIdBuilder,v=e.type||e;if("bulkActions"===v||"bulk-actions"===v)return this.renderBulkActions(r);if("pagination"===v)return this.renderPagination(e);if("statistics"===v)return this.renderStatistics();if("switch-per-page"===v)return this.renderSwitchPerPage(r);if("load-more"===v)return this.renderLoadMore();if("filter-toggler"===v)return this.renderFilterToggler();if("export-csv"===v)return this.renderExportCSV(e);if("reload"===v){var m={label:"",icon:"fa fa-sync",tooltip:u("reload"),tooltipPlacement:"top",type:"button"};return"object"==typeof e&&(m=(0,n.Cl)((0,n.Cl)({},m),y()(e,["type","align"]))),s("toolbar/".concat(t),m,{onAction:function(){a.reload()}})}if(Array.isArray(e)){var f=e.filter((function(e){return(0,h.zNq)(e,d.toolbarData)})).map((function(e,t){return{dom:a.renderToolbar(e,t,r,o),toolbar:e}})).filter((function(e){return e.dom})),g=f.length,b=this.props.classnames;return g?i.createElement("div",(0,n.Cl)({className:b("Crud-toolbar"),key:t},null==p?void 0:p.getChild("toolbar").getTestId()),f.map((function(e,t){var r=e.toolbar,n=e.dom,o=r.type||r,a=r.align||("pagination"===o?"right":"left");return i.createElement("div",{key:r.id||t,className:b("Crud-toolbar-item",a?"Crud-toolbar-item--".concat(a):"",{"is-mobile":c})},n)}))):null}var C=o?o(e,t):void 0;if(void 0!==C)return C;var F=r.$$editable;return s("toolbar/".concat(t),e,{data:d.toolbarData,page:d.page,lastPage:d.lastPage,perPage:d.perPage,total:d.total,onQuery:this.handleQuery,onAction:this.handleAction,onChangePage:this.handleChangePage,onBulkAction:this.handleBulkAction,$$editable:F})},t.prototype.renderHeaderToolbar=function(e,t){var r=this.props,n=r.toolbar,i=r.toolbarInline,o=r.headerToolbar;return n&&(o=Array.isArray(o)?i?o.concat(n):[o,n]:o?[o,n]:n),this.renderToolbar(o||[],0,e,t)},t.prototype.renderFooterToolbar=function(e,t){var r=this.props,n=r.toolbar,i=r.toolbarInline,o=r.footerToolbar;return n&&(o=Array.isArray(o)?i?o.concat(n):[o,n]:o?[o,n]:n),this.renderToolbar(o,0,e,t)},t.prototype.renderTag=function(e,t){var r=this.props,n=r.classnames,o=r.labelField,a=r.labelTpl,l=r.primaryField,s=r.valueField,d=(r.translate,r.env),c=r.itemCheckableOn,u=!c||(0,h.pgu)(c,e);return i.createElement("div",{key:t,className:n("Crud-value",u?"":"is-disabled")},i.createElement("span",{className:n("Crud-valueIcon"),onClick:this.unSelectItem.bind(this,e,t)},"×"),i.createElement("span",{className:n("Crud-valueLabel")},a?i.createElement(v.Ed,{html:(0,h.pbD)(a,e),filterHtml:d.filterHtml}):(0,h.dnO)(e,o||"label")||(0,h.dnO)(e,s||l||"id")))},t.prototype.renderSelection=function(){var e=this,t=this.props,r=t.store,o=t.classPrefix,a=t.classnames,l=(t.labelField,t.labelTpl,t.primaryField,t.valueField,t.translate),s=(t.env,t.popOverContainer),d=t.multiple,c=t.maxTagCount,u=t.overflowTagPopover,p=t.keepItemSelectionOnPageChange;if(!r.selectedItems.length||!p||!1===d)return null;var m=r.selectedItems.length,f=r.selectedItems,g=!1!==d&&(0,h.z09)(c,{start:0,end:m,left:"inclusive",right:"exclusive"});return g&&(f=(0,n.fX)((0,n.fX)([],(0,n.zs)(r.selectedItems.slice(0,c)),!1),[{label:"+ ".concat(m-c," ..."),value:"__overflow_tag__"}],!1)),i.createElement("div",{className:a("Crud-selection")},i.createElement("div",{className:a("Crud-selectionLabel")},l("CRUD.selected",{total:r.selectedItems.length})),f.map((function(t,d){return g&&d===c?i.createElement(v.T_,{key:d,container:s,tooltip:(0,n.Cl)((0,n.Cl)({placement:"top",trigger:"hover",showArrow:!1,offset:[0,-10],tooltipClassName:a("Crud-selection-overflow",null==u?void 0:u.tooltipClassName),title:l("已选项")},y()(u,["children","content","tooltipClassName"])),{children:function(){return i.createElement("div",{className:a("".concat(o,"Crud-selection-overflow-wrapper"))},r.selectedItems.slice(c,m).map((function(t,r){var n=r+c;return e.renderTag(t,n)})))}})},i.createElement("div",{key:d,className:a("Crud-value")},i.createElement("span",{className:a("Crud-valueLabel")},t.label))):e.renderTag(t,d)})),i.createElement("a",{onClick:this.clearSelection,className:a("Crud-selectionClear")},l("clear")))},t.prototype.renderFilter=function(){var e,t=this.props,r=t.store,i=t.render,o=t.classnames,a=t.filter,l=t.translate,s=t.testIdBuilder,d=t.filterCanAccessSuperData,c=void 0===d||d;return a||r.filterTogggable&&!r.filterVisible?i("filter",(0,n.Cl)((0,n.Cl)({title:l("CRUD.filter"),mode:"inline",submitText:l("search")},a),{type:"form",api:null,testIdBuilder:null==s?void 0:s.getChild("filter")}),{key:"filter",panelClassName:o("Crud-filter",a.panelClassName||"Panel--default"),data:r.filterData,onReset:this.handleFilterReset,onSubmit:this.handleFilterSubmit,onInit:this.handleFilterInit,formStore:void 0,canAccessSuperData:null!==(e=null==a?void 0:a.canAccessSuperData)&&void 0!==e?e:c}):null},t.prototype.filterItemIndex=function(e){var t,r=this.props.store,n="".concat(e).split(".").map((function(e){return parseInt(e,10)}));if(!Array.isArray(r.data.items))return e;var i=null===(t=r.data.items)||void 0===t?void 0:t[n[0]];return i&&(n[0]=r.items.findIndex((function(e){return(e.__pristine||e)===(i.__pristine||i)}))),n.join(".")},t.prototype.filterBodySchema=function(e){return e},t.prototype.renderBody=function(){var e,t=this.props,r=(t.className,t.style,t.bodyClassName),i=t.filter,o=t.render,a=t.store,l=t.mode,s=(t.syncLocation,t.children,t.bulkActions),d=t.pickerMode,c=t.multiple,u=t.strictMode,p=t.valueField,h=t.primaryField,v=(t.value,t.hideQuickSaveBtn),m=t.itemActions,f=t.classnames,g=t.keepItemSelectionOnPageChange,b=t.maxKeepItemSelectionLength,y=t.maxItemSelectionLength,C=(t.onAction,t.popOverContainer),F=(t.translate,t.onQuery,t.autoGenerateFilter),S=(t.onSelect,t.autoFillHeight),P=t.onEvent,I=(t.onSave,t.onSaveOrder,t.onPopOverOpened,t.onPopOverClosed,t.onSearchableFromReset,t.onSearchableFromSubmit,t.onSearchableFromInit,t.headerToolbarRender,t.footerToolbarRender,t.testIdBuilder),T=t.id,A=t.filterCanAccessSuperData,k=void 0===A||A,O=t.selectable,D=void 0!==O&&O,x=(0,n.Tt)(t,["className","style","bodyClassName","filter","render","store","mode","syncLocation","children","bulkActions","pickerMode","multiple","strictMode","valueField","primaryField","value","hideQuickSaveBtn","itemActions","classnames","keepItemSelectionOnPageChange","maxKeepItemSelectionLength","maxItemSelectionLength","onAction","popOverContainer","translate","onQuery","autoGenerateFilter","onSelect","autoFillHeight","onEvent","onSave","onSaveOrder","onPopOverOpened","onPopOverClosed","onSearchableFromReset","onSearchableFromSubmit","onSearchableFromInit","headerToolbarRender","footerToolbarRender","testIdBuilder","id","filterCanAccessSuperData","selectable"]);return o("body",(0,n.Cl)((0,n.Cl)({},this.filterBodySchema(x)),{id:T,onEvent:this.filterOnEvent(P),columns:null!==(e=a.columns)&&void 0!==e?e:x.columns,type:l||"table"}),{key:"body",className:f("Crud-body",r),ref:this.controlRef,autoGenerateFilter:!i&&F,filterCanAccessSuperData:k,autoFillHeight:S,selectable:!!(this.hasBulkActionsToolbar()&&this.hasBulkActions()||d||D),itemActions:m,multiple:void 0===c?!!(s&&s.length>0):c,selected:a.selectedItemsAsArray,strictMode:u,keepItemSelectionOnPageChange:g,maxKeepItemSelectionLength:b,maxItemSelectionLength:y,valueField:p||h,primaryField:h,hideQuickSaveBtn:v,items:a.data.items,fullItems:a.itemsAsArray,query:a.query,orderBy:a.query.orderBy,orderDir:a.query.orderDir,popOverContainer:C,onAction:this.handleAction,onItemChange:this.handleItemChange,onSave:this.handleSave,onSaveOrder:this.handleSaveOrder,onQuery:this.handleQuery,onSelect:this.handleSelect,onPopOverOpened:this.handleChildPopOverOpen,onPopOverClosed:this.handleChildPopOverClose,onSearchableFromReset:this.handleFilterReset,onSearchableFromSubmit:this.handleFilterSubmit,onSearchableFromInit:this.handleFilterInit,headerToolbarRender:this.renderHeaderToolbar,footerToolbarRender:this.renderFooterToolbar,data:a.mergedData,loading:a.loading,host:this,filterItemIndex:this.filterItemIndex,onDbClick:this.props.rowDbClick,testIdBuilder:null==I?void 0:I.getChild("body")})},t.prototype.render=function(){var e=this.props,t=e.className,r=e.style,o=e.render,a=e.store,l=e.classnames,s=(e.translate,e.testIdBuilder),d=e.id;return i.createElement("div",(0,n.Cl)({className:l("Crud",t,{"is-loading":a.loading,"is-mobile":(0,h.FrL)()}),style:r,"data-id":d,"data-role":"container"},null==s?void 0:s.getChild("wrapper").getTestId()),this.renderFilter(),this.renderSelection(),this.renderBody(),o("dialog",(0,n.Cl)((0,n.Cl)({},a.action&&a.action.dialog),{type:"dialog"}),{key:"dialog",data:a.dialogData,onConfirm:this.handleDialogConfirm,onClose:this.handleDialogClose,show:a.dialogOpen}))},t.propsList=["bulkActions","itemActions","mode","orderField","syncLocation","toolbar","toolbarInline","messages","value","options","multiple","valueField","defaultParams","bodyClassName","perPageAvailable","pageField","perPageField","pageDirectionField","hideQuickSaveBtn","autoJumpToTopOnPagerChange","interval","silentPolling","stopAutoRefreshWhen","stopAutoRefreshWhenModalIsOpen","api","affixHeader","columnsTogglable","placeholder","tableClassName","headerClassName","footerClassName","headerToolbar","footerToolbar","filterTogglable","filterDefaultVisible","autoGenerateFilter","syncResponse2Query","keepItemSelectionOnPageChange","labelTpl","labelField","loadDataOnce","loadDataOnceFetchOnFilter","source","header","columns","size","onChange","onInit","onSaved","onSave","onQuery","formStore","autoFillHeight","maxTagCount","overflowTagPopover","parsePrimitiveQuery","matchFunc"],t.defaultProps={toolbarInline:!0,headerToolbar:["bulkActions"],footerToolbar:["statistics","pagination"],primaryField:"id",syncLocation:!0,pageField:"page",perPageField:"perPage",pageDirectionField:"pageDir",hideQuickSaveBtn:!1,autoJumpToTopOnPagerChange:!0,silentPolling:!1,filterTogglable:!1,filterDefaultVisible:!0,loadDataOnce:!1,autoFillHeight:!1,parsePrimitiveQuery:!0},t}(i.Component),D=function(e){function t(t,r){var n=e.call(this,t)||this;return r.registerComponent(n),n}return(0,n.C6)(t,e),t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.context.unRegisterComponent(this)},t.prototype.reload=function(t,r,n,i,o,a){var l,s=this.context;return(null==a?void 0:a.index)||(null==a?void 0:a.condition)?null===(l=this.control)||void 0===l?void 0:l.reload("",r,n,void 0,void 0,a):t?s.reload(r?"".concat(t,"?").concat((0,h.Eqn)(r)):t,n):e.prototype.reload.call(this,t,r,n,i,o,a)},t.prototype.receive=function(t,r,i,o,a){return(0,n.sH)(this,void 0,void 0,(function(){var l;return(0,n.YH)(this,(function(n){return l=this.context,r?[2,l.send(r,t)]:[2,e.prototype.receive.call(this,t,void 0,i,o,a)]}))}))},t.prototype.reloadTarget=function(e,t){this.context.reload(e,t)},t.prototype.closeTarget=function(e){this.context.close(e)},t.prototype.setData=function(e,t,r,i){var o,a,l;return(0,n.sH)(this,void 0,void 0,(function(){var s,d,c;return(0,n.YH)(this,(function(u){return s=this.props.store,void 0!==r||void 0!==i?[2,null===(a=null===(o=this.control)||void 0===o?void 0:o.setData)||void 0===a?void 0:a.call(o,e,t,r,i)]:(d=(null==e?void 0:e.total)||(null==e?void 0:e.count),c=null!==(l=e.rows)&&void 0!==l?l:e.items,void 0!==d&&s.updateTotal(parseInt(d,10)),[2,s.updateData((0,n.Cl)((0,n.Cl)({},e),c?{items:c}:{}),void 0,t)])}))}))},t.prototype.getData=function(){var e=this.props,t=e.store,r=e.data;return t.getData(r)},t.contextType=h.MzX,t}(O),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.C6)(t,e),(0,n.Cg)([(0,h.A49)({type:"crud",storeType:h.wKF.name,isolateScope:!0})],t)}(D)},71086:function(e,t,r){var n=r(34932),i=r(15389),o=r(97420),a=r(83349);e.exports=function(e,t){if(null==e)return{};var r=n(a(e),(function(e){return[e]}));return t=i(t),o(e,r,(function(e,r){return t(e,r[0])}))}}}]);