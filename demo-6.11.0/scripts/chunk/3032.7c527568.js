"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[3032],{63032:function(e,t,n){n.r(t),n.d(t,{CheckboxControlRenderer:function(){return y},CityPicker:function(){return c},LocationControl:function(){return p},default:function(){return u}});var i=n(31635),r=n(96540),o=n(62758),l=n(71121),a=n(66283),s=function(e){var t,n=e.value,i=e.db,r=e.delimiter,o=void 0===r?",":r,l={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""};if(!i||!n)return l;var a=n&&n.code||"number"==typeof n&&n||"string"==typeof n&&/(\d{6})/.test(n)&&RegExp.$1;if(a&&i[a]){a=parseInt(a,10),l.code=a;var s=a-a%1e4;i[s]&&(l.provinceCode=s,l.province=i[s]);var d=a-a%100;d!==s&&i[d]?(l.cityCode=d,l.city=i[d]):~(null===(t=i.city[s])||void 0===t?void 0:t.indexOf(a))&&(l.cityCode=a,l.city=i[a]),a%100&&(l.district=i[a],l.districtCode=a)}return n&&n.street?l.street=n.street:"string"==typeof n&&~n.indexOf(o)&&(l.street=n.slice(n.indexOf(o)+o.length)),l},d=function(e){n.e(7556).then(n.bind(n,47556)).then(e)},c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},t}return(0,i.C6)(t,e),t.prototype.componentDidMount=function(){var e=this;this.loadDb((function(){return e.syncIn()}))},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props;n.value!==e.value&&this.loadDb((function(){return t.syncIn(n)}))},t.prototype.loadDb=function(e){var t=this;this.state.db?null==e||e():d((function(n){t.setState({db:(0,i.Cl)((0,i.Cl)({},n.default),{province:n.province,city:n.city,district:n.district})},e)}))},t.prototype.handleProvinceChange=function(e){this.setState(e?{province:e.label,provinceCode:e.value,city:"",cityCode:0,district:"",districtCode:0,street:"",code:e?e.value:0}:{code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},this.syncOut)},t.prototype.handleCityChange=function(e){if(e.value%100)return this.handleDistrictChange(e,{cityCode:e.value});this.setState(e?{city:e.label,cityCode:e.value,district:"",districtCode:0,street:"",code:e.value}:{city:"",cityCode:0,district:"",districtCode:0,street:"",code:this.state.provinceCode},this.syncOut)},t.prototype.handleDistrictChange=function(e,t){void 0===t&&(t={}),this.setState(e?(0,i.Cl)((0,i.Cl)({},t),{district:e.label,districtCode:e.value,street:"",code:e.value}):(0,i.Cl)((0,i.Cl)({},t),{district:"",districtCode:0,street:"",code:this.state.cityCode}),this.syncOut)},t.prototype.handleStreetChange=function(e){this.setState({street:e.currentTarget.value})},t.prototype.handleStreetEnd=function(){this.syncOut()},t.prototype.syncIn=function(e){void 0===e&&(e=this.props);var t=this.state.db,n=e.value,i=e.delimiter;t&&this.setState(s({value:n,delimiter:i,db:t}))},t.prototype.syncOut=function(){var e=this.props,t=e.onChange,n=e.allowStreet,i=e.joinValues,r=e.extractValue,o=e.delimiter,l=this.state,a=l.code,s=l.province,d=l.city,c=l.district,u=l.street,p=l.provinceCode,y=l.cityCode,C=l.districtCode;t((void 0===r?i:r)?a?n&&u?[a,u].join(o):String(a):"":{code:a,provinceCode:p,province:s,cityCode:y,city:d,districtCode:C,district:c,street:u})},t.prototype.render=function(){var e,t,n=this.props,o=n.classnames,a=n.className,s=(n.style,n.disabled),d=n.allowCity,c=n.allowDistrict,u=n.allowStreet,p=n.searchable,y=n.translate,C=n.loadingConfig,h=n.popOverContainer,v=n.itemClassName,g=n.testIdBuilder,f=this.state,m=f.provinceCode,b=f.cityCode,S=f.districtCode,O=f.street,w=f.db;return w?r.createElement("div",{className:o("CityPicker",a)},r.createElement(l.l6,{className:o(v),searchable:p,disabled:s,options:w.province.map((function(e){return{label:w[e],value:e}})),value:m||"",onChange:this.handleProvinceChange,popOverContainer:h,testIdBuilder:null==g?void 0:g.getChild("province")}),d&&w.city[m]&&w.city[m].length?r.createElement(l.l6,{className:o(v),searchable:p,disabled:s,options:w.city[m].map((function(e){return{label:w[e],value:e}})),value:b||"",onChange:this.handleCityChange,popOverContainer:h,testIdBuilder:null==g?void 0:g.getChild("city")}):null,b&&c&&(null===(t=null===(e=w.district[m])||void 0===e?void 0:e[b])||void 0===t?void 0:t.length)?r.createElement(l.l6,{className:o(v),searchable:p,disabled:s,options:w.district[m][b].map((function(e){return{label:w[e],value:e}})),value:S||"",onChange:this.handleDistrictChange,popOverContainer:h,testIdBuilder:null==g?void 0:g.getChild("district")}):null,u&&m?r.createElement("input",(0,i.Cl)({className:o("CityPicker-input"),value:O||"",onChange:this.handleStreetChange,onBlur:this.handleStreetEnd,placeholder:y("City.street"),disabled:s},null==g?void 0:g.getChild("street").getTestId())):null):r.createElement(l.y$,{show:!0,size:"sm",loadingConfig:C})},t.defaultProps={joinValues:!0,extractValue:!0,delimiter:",",allowCity:!0,allowDistrict:!0,allowStreet:!1},(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"handleProvinceChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"handleCityChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object,Object]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"handleDistrictChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"handleStreetChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"handleStreetEnd",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"syncIn",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"syncOut",null),t}(r.Component),u=(0,o.IWl)((0,o.t5k)(c)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={db:null},t}return(0,i.C6)(t,e),t.prototype.doAction=function(e,t,n){var i,r,l=this.props,a=l.resetValue,s=l.onChange,d=l.formStore,c=l.store,u=l.name,p=null==e?void 0:e.actionType;if("clear"===p)s("");else if("reset"===p){var y=null!==(r=(0,o.dnO)(null!==(i=null==d?void 0:d.pristine)&&void 0!==i?i:null==c?void 0:c.pristine,u))&&void 0!==r?r:a;s(null!=y?y:"")}},t.prototype.handleChange=function(e){return(0,i.sH)(this,void 0,void 0,(function(){var t,n,r,l;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.onChange,[4,n("change",(0,o.RKM)(this.props,{value:e},"value"))];case 1:return(null==(l=i.sent())?void 0:l.prevented)||r(e),[2]}}))}))},t.prototype.renderStatic=function(e){var t=this;void 0===e&&(e="");var n=this.props,o=n.value,a=n.delimiter,c=n.loadingConfig;if(!this.state.db)return d((function(e){t.setState({db:(0,i.Cl)((0,i.Cl)({},e.default),{province:e.province,city:e.city,district:e.district})})})),r.createElement(l.y$,{size:"sm",show:!0,loadingConfig:c});if(!o)return r.createElement(r.Fragment,null,e);var u=s({value:o,delimiter:a,db:this.state.db}),p=u.province,y=u.city,C=u.district,h=u.street;return r.createElement(r.Fragment,null,[p,y,C,h].filter((function(e){return!!e})).join(a))},t.prototype.render=function(){var e=this.props,t=e.value,n=e.allowCity,i=e.allowDistrict,o=e.extractValue,a=e.joinValues,s=e.allowStreet,d=e.disabled,c=e.searchable,p=e.env,y=e.mobileUI,C=e.popOverContainer,h=e.itemClassName,v=e.testIdBuilder;return y?r.createElement(l.td,{value:t,popOverContainer:null==p?void 0:p.getModalContainer,onChange:this.handleChange,allowCity:n,allowDistrict:i,extractValue:o,joinValues:a,allowStreet:s,disabled:d,mobileUI:y}):r.createElement(u,{itemClassName:h,popOverContainer:C||(null==p?void 0:p.getModalContainer),searchable:c,value:t,onChange:this.handleChange,allowCity:n,allowDistrict:i,extractValue:o,joinValues:a,allowStreet:s,disabled:d,testIdBuilder:v})},(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object,Object,Boolean]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"doAction",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",Promise)],t.prototype,"handleChange",null),(0,i.Cg)([(0,a.E)(),(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[]),(0,i.Sn)("design:returntype",void 0)],t.prototype,"render",null),t}(r.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.C6)(t,e),(0,i.Cg)([(0,o.eIh)({type:"input-city",sizeMutable:!1})],t)}(p)}}]);