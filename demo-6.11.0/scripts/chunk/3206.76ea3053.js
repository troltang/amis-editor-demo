"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[3206],{73206:function(t,e,n){n.r(e),n.d(e,{NumberControlRenderer:function(){return d},default:function(){return c}});var i=n(31635),r=n(96540),o=n(23702),s=n(62758),a=n(32485),u=n.n(a),l=n(71121),p=n(66283),c=function(t){function e(e){var n=t.call(this,e)||this;n.handleChange=n.handleChange.bind(n),n.handleChangeUnit=n.handleChangeUnit.bind(n);var i=n.getUnit(),r=(0,s.a5s)(e.unitOptions),o=e.formItem,a=e.value;return o&&n.formatNumber(a,!0),n.state={unit:i,unitOptions:r},n}return(0,i.C6)(e,t),e.prototype.doAction=function(t,e,n,i){var r,o;void 0===n&&(n=!1);var a=null==t?void 0:t.actionType,u=this.props,p=u.min,c=u.max,d=u.precision,h=u.step,f=u.resetValue,m=u.big,v=u.onChange,g=u.clearValueOnEmpty,y=u.formStore,C=u.store,b=u.name;if("clear"===a)null==v||v(g?void 0:"");else if("reset"===a){var N=l.Q7.normalizePrecision(this.filterNum(d),this.filterNum(h)),S=null!==(o=(0,s.dnO)(null!==(r=null==y?void 0:y.pristine)&&void 0!==r?r:null==C?void 0:C.pristine,b))&&void 0!==o?o:f,O=l.Q7.normalizeValue(null!=S?S:"",this.filterNum(p,m),this.filterNum(c,m),N,null!=S?S:"",g,m);null==v||v(g&&""===O?void 0:O)}},e.prototype.formatNumber=function(t,e){void 0===e&&(e=!1);var n=this.props,i=n.showAsPercent,r=n.suffix,a=n.step,u=n.big,p=n.setPrinstineValue,c=this.props.precision;i&&"%"===r&&(c=(c||0)+2);var d=this.getUnit(),h=(0,s.a5s)(this.props.unitOptions),f=l.Q7.normalizePrecision(this.filterNum(c),this.filterNum(a));if(null!=t&&null!=f&&(!d||0===h.length)&&!0!==u){var m=parseFloat((0,o.Mg)(t.toString(),".",f));isNaN(m)||m===t||(t=m,e&&p(m))}return t},e.prototype.getUnit=function(){var t,e,n=this.props;if(n.unitOptions&&n.unitOptions.length){var r=(0,s.a5s)(n.unitOptions).map((function(t){return t.value}));if(n.value&&"string"==typeof n.value){var o=r[0];r.sort((function(t,e){return e.length-t.length}));try{for(var a=(0,i.Ju)(r),u=a.next();!u.done;u=a.next()){var l=u.value;if(n.value.endsWith(l)){o=l;break}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o}return r[0]}},e.prototype.getValue=function(t){var e=this.props,n=e.resetValue,i=e.unitOptions;if(!t||"number"==typeof t||"string"==typeof t)return null!==t&&i&&this.state.unit&&(t+=String(this.state.unit)),null===t?null!=n?n:null:t},e.prototype.dispatchEvent=function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n,r;return(0,i.YH)(this,(function(i){return e=this.props,n=e.dispatchEvent,r=e.value,n(t,(0,s.RKM)(this.props,{value:r})),[2]}))}))},e.prototype.handleChange=function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n,r,o,a,u,l;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return e=this.props,n=e.onChange,r=e.dispatchEvent,o=e.clearValueOnEmpty,a=this.getValue(t),u=o&&""===a?void 0:a,u=this.formatNumber(u),[4,r("change",(0,s.RKM)(this.props,{value:u}))];case 1:return(null==(l=i.sent())?void 0:l.prevented)||n(u),[2]}}))}))},e.prototype.changeCursorPos=function(t){var e,n;if(!isNaN(t)){var i=this.props,r=i.kilobitSeparator,o=i.prefix,s=t>0?Math.floor(t):Math.ceil(t),a="".concat(t).length;if(o&&(a+=o.length),r){var u=Math.floor(("".concat(Math.abs(s)).length-1)/3);u>0&&(a+=u)}this.input&&(r||o)&&(null===(n=(e=this.input).setSelectionRange)||void 0===n||n.call(e,a,a))}},e.prototype.filterNum=function(t,e){if(void 0===e&&(e=!1),void 0!==t)return"number"!=typeof t&&(t=(0,s.pbD)(t,this.props.data),t=/^[-]?\d+/.test(t)?e?t:+t:void 0),t},e.prototype.handleChangeUnit=function(t){var e=this,n=this.props.value,i=this.state.unit;this.setState({unit:t.value},(function(){n&&(n=n.toString().replace(i,""),e.props.onChange(n+e.state.unit))}))},e.prototype.componentDidUpdate=function(t){var e=this.getUnit(),n=this.props,i=n.value,r=n.formInited,o=n.onChange,a=n.setPrinstineValue;if(null!=i&&("string"==typeof i||"number"==typeof i)&&e&&!String(i).endsWith(e)){var u=this.getValue(i);!1===r?null==a||a(u):null==o||o(u)}this.props.value!==t.value&&/^([-+]?(([1-9]\d*\.?\d*)|(0\.\d*[1-9]))[^\d\.]*)$/.test(this.props.value)&&this.setState({unit:e}),this.props.unitOptions!==t.unitOptions&&this.setState({unitOptions:(0,s.a5s)(this.props.unitOptions)})},e.prototype.inputRef=function(t){this.input=t},e.prototype.focus=function(){this.input&&this.input.focus()},e.prototype.render=function(){var t,e=this,n=this.props,o=n.className,a=n.style,p=n.classPrefix,c=n.value,d=n.step,h=n.precision,f=n.max,m=n.min,v=n.disabled,g=n.placeholder,y=n.showSteps,C=n.borderMode,b=n.suffix,N=n.prefix,S=n.kilobitSeparator,O=n.unitOptions,E=n.readOnly,V=n.keyboard,P=n.displayMode,x=n.big,w=n.resetValue,k=n.clearValueOnEmpty,M=n.css,U=n.themeCss,R=n.inputControlClassName,A=n.id,F=n.env,H=n.name,z=n.showAsPercent,I=n.testIdBuilder,Q=n.popOverContainer,B=this.state.unit,D=this.filterNum(h),_=S||N||b?function(t,n){var i,r=n.userTyping,o=n.input;if(S&&t)if(r||e.input===document.activeElement){var a=t.toString().split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t=a.join(".")}else t=(0,s.EgU)(t,D);return b&&r&&(null===(i=e.input)||void 0===i?void 0:i.selectionStart)===o.length?"".concat(N||"").concat(t):"".concat(N||"").concat(t).concat(b||"")}:void 0,K=B&&c&&"string"==typeof c?c.replace(B,""):isNaN(c)?void 0:c;return r.createElement("div",{className:u()("".concat(p,"NumberControl"),(t={},t["".concat(p,"NumberControl--withUnit")]=O,t),o),style:a},r.createElement(l.Q7,{name:H,inputControlClassName:u()(R,(0,s.NH8)((0,i.Cl)((0,i.Cl)({},this.props),{name:"inputControlClassName",id:A,themeCss:U||M})),(0,s.NH8)((0,i.Cl)((0,i.Cl)({},this.props),{name:"inputControlClassName",id:A,themeCss:U||M,extra:"inner"}))),inputRef:this.inputRef,value:K,resetValue:w,step:d,max:this.filterNum(f,x),min:this.filterNum(m,x),formatter:_,parser:function(t){return t&&(N&&(t=t.replace(N,"")),b&&(t=t.replace(b,"")),S&&(t=t.replace(/,/g,""))),t},onChange:this.handleChange,disabled:v,placeholder:g,precision:D,showSteps:y,borderMode:C,readOnly:E,suffix:b,showAsPercent:z,onFocus:function(){return e.dispatchEvent("focus")},onBlur:function(){return e.dispatchEvent("blur")},keyboard:V,displayMode:P,big:x,clearValueOnEmpty:k,testIdBuilder:I}),Array.isArray(O)&&0!==O.length?O.length>1?r.createElement(l.l6,{value:B,clearable:!1,options:this.state.unitOptions||[],onChange:this.handleChangeUnit,className:"".concat(p,"NumberControl-unit"),disabled:v,popOverContainer:Q}):r.createElement("div",{className:u()("".concat(p,"NumberControl-unit"),"".concat(p,"NumberControl-single-unit"),"".concat(p,"Select"),"".concat(E?"".concat(p,"NumberControl-readonly"):""))},"string"==typeof O[0]?O[0]:O[0].label):null,r.createElement(s.z4D,(0,i.Cl)({},this.props,{config:{themeCss:U||M,classNames:[{key:"inputControlClassName",weights:{focused:{pre:"".concat(p,"Number-").concat(P?P+"-":"","focused.")},disabled:{pre:"".concat(p,"Number-").concat(P?P+"-":"","disabled.")}}}],id:A},env:F})),r.createElement(s.z4D,(0,i.Cl)({},this.props,{config:{themeCss:(0,s.oKQ)(U||M),classNames:[{key:"inputControlClassName",weights:{default:{inner:"input"},hover:{inner:"input"},focused:{pre:"".concat(p,"Number-").concat(P?P+"-":"","focused."),inner:"input"},disabled:{pre:"".concat(p,"Number-").concat(P?P+"-":"","disabled."),inner:"input"}}}],id:A&&A+"-inner"},env:F})))},e.defaultProps={step:1,resetValue:"",clearValueOnEmpty:!1},(0,i.Cg)([s.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[String]),(0,i.Sn)("design:returntype",Promise)],e.prototype,"dispatchEvent",null),(0,i.Cg)([s.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Number]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"changeCursorPos",null),(0,i.Cg)([s.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"inputRef",null),(0,i.Cg)([(0,p.E)(),(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"render",null),e}(r.Component),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.defaultProps=(0,i.Cl)({validations:"isNumeric"},c.defaultProps),(0,i.Cg)([(0,s.eIh)({type:"input-number",detectProps:["unitOptions","precision","suffix"]})],e)}(c)}}]);