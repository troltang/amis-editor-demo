(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[5960],{55960:function(e,t,n){"use strict";n.r(t),n.d(t,{CascaderSelectControlRenderer:function(){return f},NestedSelectControlRenderer:function(){return m},default:function(){return y}});var s=n(31635),i=n(96540),r=n(71121),l=n(62758),o=n(40961),a=n(56625),d=n.n(a),u=n(80299),c=n.n(u),p=n(83673),h=n.n(p),g=n(66283),v=n(51545),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.outTarget=i.createRef(),t.state={isOpened:!1,isFocused:!1,inputValue:"",stack:[t.props.options]},t}return(0,s.C6)(t,e),t.prototype.domRef=function(e){this.target=e},t.prototype.componentDidUpdate=function(e){e.options!==this.props.options&&this.setState({stack:[this.props.options]})},t.prototype.doAction=function(e,t,n){var s,i,r=this.props,o=r.resetValue,a=r.onChange,d=r.formStore,u=r.store,c=r.name,p=null==e?void 0:e.actionType;if("clear"===p)null==a||a("");else if("reset"===p){var h=null!==(i=(0,l.dnO)(null!==(s=null==d?void 0:d.pristine)&&void 0!==s?s:null==u?void 0:u.pristine,c))&&void 0!==i?i:o;null==a||a(null!=h?h:"")}},t.prototype.dispatchEvent=function(e,t){return void 0===t&&(t={}),(0,s.sH)(this,void 0,void 0,(function(){var n,i,r,o,a,d,u;return(0,s.YH)(this,(function(c){switch(c.label){case 0:return n=this.props,i=n.dispatchEvent,r=n.options,o=n.multiple,a=n.value,d=n.selectedOptions,[4,i(e,(0,l.RKM)(this.props,(0,s.Cl)({options:r,items:r,value:a,selectedItems:o?d:d[0]},t)))];case 1:return[2,!!(null==(u=c.sent())?void 0:u.prevented)]}}))}))},t.prototype.isParentNode=function(e){return Array.isArray(e.children)&&e.children.length>0},t.prototype.handleOutClick=function(e){var t;e.stopPropagation(),this.outTargetWidth=null===(t=this.outTarget.current)||void 0===t?void 0:t.clientWidth,e.defaultPrevented||this.setState((function(e){return{isOpened:!e.isOpened}}))},t.prototype.handleResultClear=function(){this.setState({inputValue:void 0})},t.prototype.close=function(){this.setState({isOpened:!1})},t.prototype.removeItem=function(e,t){return(0,s.sH)(this,void 0,void 0,(function(){var n,i,r,l;return(0,s.YH)(this,(function(s){switch(s.label){case 0:return n=this.props,i=n.onChange,r=n.selectedOptions,t&&t.stopPropagation(),r.splice(e,1),l=this.getValue(),[4,this.dispatchEvent("change",{value:l})];case 1:return s.sent()||i(l),[2]}}))}))},t.prototype.renderValue=function(e,t){var n=this.props,s=n.classnames,r=n.labelField,o=n.valueField,a=n.options,d=n.hideNodePathLabel,u=this.state.inputValue||"",c=(0,l.NhP)(u);if(d)return(0,l.dMh)(e[r||"label"]);var p=(0,l.fw2)(a,e,!0),h=(0,l.dMh)(e[r||"label"]),g=p?p.map((function(e){return(0,l.dMh)(e[r||"label"])})).join(" / "):h;return i.createElement("span",{className:s("Select-valueLabel"),key:t||e[o||"value"],title:g},p?p.map((function(e,t){var n=(0,l.dMh)(e[r||"label"]),s=e[o||"value"],a=t===p.length-1;return i.createElement("span",{key:t},c.test(s)||c.test(n)?(0,l.gGz)(n,u):n,!a&&" / ")})):h)},t.prototype.handleOptionClick=function(e){return(0,s.sH)(this,void 0,void 0,(function(){var t,n,i,r,l,o,a,d,u;return(0,s.YH)(this,(function(s){switch(s.label){case 0:return t=this.props,n=t.multiple,i=t.onChange,r=t.joinValues,l=t.extractValue,o=t.valueField,a=t.onlyLeaf,n||void 0===(d=r||l?e[o||"value"]:e)||a&&this.isParentNode(e)?[2]:[4,this.dispatchEvent("change",{value:d})];case 1:return(u=s.sent())||i(d),u||this.handleResultClear(),this.setState({stack:[this.props.options]}),this.close(),[2]}}))}))},t.prototype.handleCheck=function(e,t,n){return(0,s.sH)(this,void 0,void 0,(function(){var i,r,o,a,u,p,g,v,y,m,f,C,S,b,k,N,O,E,F,w,P;return(0,s.YH)(this,(function(s){switch(s.label){case 0:if(i=this.props,r=i.onChange,o=i.selectedOptions,a=i.joinValues,u=i.delimiter,p=i.extractValue,g=i.withChildren,v=i.onlyChildren,y=i.cascade,m=i.options,f=i.onlyLeaf,C=this.state.stack,S=this.props.valueField||"value",f&&!Array.isArray(e)&&this.isParentNode(e))return[2];if(!Array.isArray(e)&&e.children&&e.children.length&&"number"==typeof t&&(C[t]?C.splice(t+1,1,e.children):C.push(e.children)),b=o,N=function(e){return h()((0,l.dGY)(Array.isArray(e)?e:[e],(function(e){return e.children&&e.children.length?null:e})))},Array.isArray(e)?(g?e=(0,l.dGY)(e):v&&(e=N(e)),k=b.length===e.length?[]:e):Array.isArray(e.children)?y?k=d()(b,[e]):g?(e=(0,l.dGY)([e]),O=e.every((function(e){return!!~b.indexOf(e)})),k=(O?d():c())(b,e)):v?(e=N(e),O=e.every((function(e){return!!~b.indexOf(e)})),k=(O?d():c())(b,e)):(k=b.filter((function(t){return!~(0,l.dGY)([e]).indexOf(t)})),!~b.indexOf(e)&&k.push(e)):k=d()(b,[e]),!y)for(E=e;(null==(F=(0,l.LUK)(m,E))?void 0:F.value)&&F.children.every((function(e){return~k.indexOf(e)}));)F.children.forEach((function(e){var t=k.indexOf(e);!~t||g||v||k.splice(t,1)})),v||k.push(F),E=F;return w=a?k.map((function(e){return e[S]})).join(u):p?k.map((function(e){return e[S]})):k,[4,this.dispatchEvent("change",{value:w})];case 1:return(P=s.sent())||r(w),P||this.handleResultClear(),n&&this.setState({stack:[this.props.options]}),[2]}}))}))},t.prototype.allChecked=function(e){var t=this,n=this.props,s=n.selectedOptions,i=n.withChildren,r=n.onlyChildren;return e.every((function(e){return(i||r)&&e.children?t.allChecked(e.children):s.some((function(t){return t===e}))}))},t.prototype.partialChecked=function(e){var t=this;return e.some((function(e){return e.children&&t.partialChecked(e.children)||t.props.selectedOptions.some((function(t){return t===e}))}))},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.getValue=function(){var e=this.props,t=e.selectedOptions,n=e.joinValues,s=e.valueField,i=e.extractValue,r=e.delimiter,l=e.value;return n?l=t.map((function(e){return e[s||"value"]})).join(r||","):i&&(l=t.map((function(e){return e[s||"value"]}))),l},t.prototype.onFocus=function(e){return(0,s.sH)(this,void 0,void 0,(function(){var t,n,i,r;return(0,s.YH)(this,(function(s){switch(s.label){case 0:return t=this.props,n=t.onFocus,i=t.disabled,r=this.getValue(),i||this.state.isOpened?[3,2]:(this.setState({isFocused:!0}),[4,this.dispatchEvent("focus",{value:r})]);case 1:s.sent()||n&&n(e),s.label=2;case 2:return[2]}}))}))},t.prototype.onBlur=function(e){return(0,s.sH)(this,void 0,void 0,(function(){var t,n;return(0,s.YH)(this,(function(s){switch(s.label){case 0:return t=this.props.onBlur,n=this.getValue(),this.setState({isFocused:!1}),[4,this.dispatchEvent("blur",{value:n})];case 1:return s.sent()||t&&t(e),[2]}}))}))},t.prototype.getTarget=function(){return this.target||(this.target=(0,o.findDOMNode)(this)),this.target},t.prototype.handleKeyPress=function(e){" "===e.key&&(this.handleOutClick(e),e.preventDefault())},t.prototype.handleInputKeyDown=function(e){var t=this.state.inputValue,n=this.props,s=n.multiple,i=n.selectedOptions;"Backspace"===e.key&&!t&&i.length&&s&&this.removeItem(i.length-1)},t.prototype.handleInputChange=function(e){var t=this.props,n=t.options,s=t.labelField,i=t.valueField,r=e&&this.state.isOpened?(0,l.hVz)(n,(function(t,n,r,l){return!!(0,v.Ht)([t].concat(l),e,{keys:[s||"label",i||"value"],threshold:v.Ht.rankings.CONTAINS}).length||!(!t.children||!t.children.length)}),1,!0):n.concat();this.setState({inputValue:e,stack:[r]})},t.prototype.handleResultChange=function(e){return(0,s.sH)(this,void 0,void 0,(function(){var t,n,i,r,l,o,a,d;return(0,s.YH)(this,(function(s){switch(s.label){case 0:return t=this.props,n=t.joinValues,i=t.extractValue,r=t.delimiter,l=t.valueField,o=t.onChange,a=t.multiple,d=Array.isArray(e)?e.concat():[],a||d.length?[3,2]:[4,this.dispatchEvent("change",{value:""})];case 1:return s.sent()||o(""),[2];case 2:return(n||i)&&(d=e.map((function(e){return e[l||"value"]}))),n&&(d=d.join(r||",")),[4,this.dispatchEvent("change",{value:d})];case 3:return s.sent()||o(d),[2]}}))}))},t.prototype.getMenuSelectMenuStyle=function(){var e=this.props.options,t=this.outTargetWidth,n=(0,l.Ufp)(e),s={};return t&&(s={width:t/n}),s},t.prototype.renderOptions=function(){var e=this,t=this.props,n=t.multiple,o=t.selectedOptions,a=t.classnames,d=t.options,u=t.disabled,c=t.checkAll,p=t.checkAllLabel,h=t.translate,g=t.labelField,v=t.menuClassName,y=t.cascade,m=t.onlyChildren,f=t.testIdBuilder,C=this.props.valueField||"value",S=this.state.stack,b=this.partialChecked(d),k=this.allChecked(d);return i.createElement(i.Fragment,null,S.map((function(t,S){return i.createElement("div",{key:S,className:a("NestedSelect-menu",v),style:e.getMenuSelectMenuStyle()},n&&c&&0===S?i.createElement("div",{className:a("NestedSelect-option","checkall")},i.createElement(r.Sc,{size:"sm",onChange:e.handleCheck.bind(e,t),checked:b,partial:b&&!k}),i.createElement("span",{onClick:e.handleCheck.bind(e,t)},h(p))):null,t.map((function(t,c){var p=null==f?void 0:f.getChild("menu-".concat(S)).getChild(t.value||c),h=(0,l.fw2)(d,t),v=null==h?void 0:h.some((function(e){return!!~o.indexOf(e)})),b=!y&&n&&v,k=null==h?void 0:h.some((function(e){return!!e.disabled})),N=b||t.disabled||k||!!u,O=!(!t.children||!e.partialChecked(t.children)),E=b||!!~o.indexOf(t);!E&&m&&n&&e.isParentNode(t)&&e.allChecked(t.children)&&(E=!0);var F=(0,l.dMh)(t[g||"label"]);return i.createElement("div",{key:c,className:a("NestedSelect-option",{"is-active":!N&&(E||!y&&O)}),onMouseEnter:e.onMouseEnter.bind(e,t,S)},n?i.createElement(r.Sc,{size:"sm",onChange:e.handleCheck.bind(e,t,S,!1),trueValue:t[C],checked:E||!y&&O,partial:!E,disabled:N,testIdBuilder:null==p?void 0:p.getChild("checkbox")}):null,i.createElement("div",(0,s.Cl)({className:a("NestedSelect-optionLabel",{"is-disabled":N}),onClick:function(){return!N&&(n?e.handleCheck(t,S):e.handleOptionClick(t))},title:F},null==p?void 0:p.getTestId()),F),t.children&&t.children.length?i.createElement("div",(0,s.Cl)({className:a("NestedSelect-optionArrowRight",{"is-disabled":N})},null==p?void 0:p.getChild("arrow-right").getTestId()),i.createElement(r.In,{icon:"right-arrow-bold",className:"icon"})):null)})))})))},t.prototype.renderSearchResult=function(){var e=this,t=this.state,n=t.stack,s=t.inputValue,r=this.props,o=r.classnames,a=r.translate,d=r.options,u=r.labelField,c=r.valueField,p=r.cascade,h=r.selectedOptions,g=r.multiple,v=r.disabled,y=r.onlyChildren,m=r.render,f=this.props.noResultsText;f&&(f=m("noResultText",a(f)));var C=(0,l.NhP)(s||""),S=(0,l.dGY)(n[0]).filter((function(e){return!(!C.test(e[c||"value"])&&!C.test(e[u||"label"]))}));return i.createElement("div",{className:o("NestedSelect-menu"),style:this.getMenuSelectMenuStyle()},S.length?S.map((function(t,n){var s=(0,l.fw2)(d,t),r=!p&&g&&(null==s?void 0:s.some((function(e){return!!~h.indexOf(e)}))),a=r||t.disabled||!!v||(null==s?void 0:s.some((function(e){return!!e.disabled}))),u=!(!t.children||!e.partialChecked(t.children)),c=r||!!~h.indexOf(t);return!c&&y&&e.isParentNode(t)&&e.allChecked(t.children)&&(c=!0),i.createElement("div",{className:o("NestedSelect-option",{"is-active":!a&&(c||!p&&u)}),key:n},i.createElement("div",{className:o("NestedSelect-optionLabel",{"is-disabled":a}),onClick:function(){!a&&(g?e.handleCheck(t,t.value,!0):e.handleOptionClick(t))}},e.renderValue(t,t.value)))})):i.createElement("div",{className:o("NestedSelect-option",{"no-result":!0})},f))},t.prototype.onMouseEnter=function(e,t,n){var s=this.state.stack;t+=1;var i=e.children;i&&i.length?s[t]?s.splice(t,1,i):s.push(i):s[t]&&s.splice(t,1),this.setState({stack:s.slice(0,t+1)})},t.prototype.renderOuter=function(){var e=this,t=this.props,n=t.popOverContainer,r=t.translate,a=t.classnames,d=t.options,u=t.render,c=t.id,p=t.themeCss,h=!!this.state.inputValue,g=this.props.noResultsText;g&&(g=u("noResultText",r(g)));var v=i.createElement(l.HSu,{disabled:!this.state.isOpened,onRootClose:this.close},(function(t){return i.createElement("div",{className:a("NestedSelect-menuOuter"),ref:t},h?e.renderSearchResult():d.length?e.renderOptions():i.createElement("div",{className:a("NestedSelect-noResult")},g))}));return i.createElement(l.hJs,{target:this.getTarget,container:n||function(){return(0,o.findDOMNode)(e)},placement:"auto",show:!0},i.createElement(l.Kx3,{className:a("NestedSelect-popover",(0,l.NH8)((0,s.Cl)((0,s.Cl)({},this.props),{name:"nestedSelectPopoverClassName",id:c,themeCss:p})))},v))},t.prototype.render=function(){var e,t=this.props,n=t.className,o=t.style,a=t.disabled,d=t.classnames,u=t.multiple,c=t.placeholder,p=t.translate,h=t.inline,g=t.searchable,v=t.selectedOptions,y=t.clearable,m=t.loading,f=t.borderMode,C=t.mobileUI,S=(t.popOverContainer,t.env),b=t.testIdBuilder,k=t.loadingConfig,N=t.maxTagCount,O=t.overflowTagPopover,E=this.props,F=E.classPrefix,w=E.themeCss,P=E.id;return i.createElement("div",{className:d("NestedSelectControl",n),ref:this.outTarget,style:o},i.createElement(r.dM,{mobileUI:C,maxTagCount:N,overflowTagPopover:O,disabled:a,ref:this.domRef,placeholder:p(null!=c?c:"placeholder.empty"),inputPlaceholder:"",className:d("NestedSelect",(e={"NestedSelect--inline":h,"NestedSelect--single":!u,"NestedSelect--multi":u,"NestedSelect--searchable":g,"is-opened":this.state.isOpened,"is-focused":this.state.isFocused},e["NestedSelect--border".concat((0,l.TF7)(f))]=f,e),(0,l.NH8)((0,s.Cl)((0,s.Cl)({},this.props),{name:"nestedSelectControlClassName",id:P,themeCss:w}))),result:u?v:v.length?v[0]:"",onResultClick:this.handleOutClick,value:this.state.inputValue,onChange:this.handleInputChange,onResultChange:this.handleResultChange,onClear:this.handleResultClear,itemRender:this.renderValue,onKeyPress:this.handleKeyPress,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleInputKeyDown,clearable:y,hasDropDownArrow:!0,allowInput:g&&!C,testIdBuilder:b},m?i.createElement(r.y$,{loadingConfig:k,size:"sm"}):void 0),C?i.createElement(r.HH,{className:d("NestedSelect-popup"),container:S.getModalContainer,isShow:this.state.isOpened,onHide:this.close,showConfirm:!1,showClose:!1},i.createElement(r.vx,(0,s.Cl)({onClose:this.close},this.props,{onChange:this.handleResultChange,options:this.props.options.slice(),value:v}))):this.state.isOpened?this.renderOuter():null,i.createElement(l.z4D,(0,s.Cl)({},this.props,{config:{themeCss:w,classNames:[{key:"nestedSelectControlClassName",weights:{hover:{suf:".is-clickable:not(.is-disabled)"},focused:{suf:".is-opened:not(.is-mobile)"},disabled:{suf:".is-disabled"}}},{key:"nestedSelectPopoverClassName",weights:{default:{suf:" .".concat(F,"NestedSelect-option")},hover:{suf:" .".concat(F,"NestedSelect-option.is-highlight")},focused:{inner:".".concat(F,"NestedSelect-option.is-active")}}}],id:P},env:S})))},t.defaultProps={cascade:!1,withChildren:!1,onlyChildren:!1,onlyLeaf:!1,searchPromptText:"Select.searchPromptText",noResultsText:"noResult",checkAll:!0,checkAllLabel:"Select.checkAll",hideNodePathLabel:!1},(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"domRef",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[String,Object]),(0,s.Sn)("design:returntype",Promise)],t.prototype,"dispatchEvent",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"handleOutClick",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"handleResultClear",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"close",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object,Object]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"renderValue",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object]),(0,s.Sn)("design:returntype",Promise)],t.prototype,"handleOptionClick",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object,Number,Boolean]),(0,s.Sn)("design:returntype",Promise)],t.prototype,"handleCheck",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"getValue",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object]),(0,s.Sn)("design:returntype",Promise)],t.prototype,"onFocus",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object]),(0,s.Sn)("design:returntype",Promise)],t.prototype,"onBlur",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"getTarget",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"handleKeyPress",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Object]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"handleInputKeyDown",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[String]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"handleInputChange",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[Array]),(0,s.Sn)("design:returntype",Promise)],t.prototype,"handleResultChange",null),(0,s.Cg)([l.d6t,(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"getMenuSelectMenuStyle",null),(0,s.Cg)([(0,g.E)(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[]),(0,s.Sn)("design:returntype",void 0)],t.prototype,"render",null),t}(i.Component),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.C6)(t,e),(0,s.Cg)([(0,l.QqA)({type:"nested-select"})],t)}(y),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.C6)(t,e),(0,s.Cg)([(0,l.QqA)({type:"cascader-select"})],t)}(y)},80299:function(e,t,n){var s=n(83120),i=n(69302),r=n(55765),l=n(83693),o=i((function(e){return r(s(e,1,l,!0))}));e.exports=o}}]);