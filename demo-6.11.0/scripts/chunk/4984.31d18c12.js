"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[4984],{34984:function(e,t,n){n.r(t),n.d(t,{UserSelectControlRenderer:function(){return h},default:function(){return p}});var r=n(31635),a=n(96540),o=n(32485),i=n.n(o),s=n(62758),l=n(71121),u=n(7309),c=n.n(u),d=n(66283),p=function(e){function t(t){return e.call(this,t)||this}return(0,r.C6)(t,e),t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},t.prototype.onSearch=function(e,t,n){return(0,r.sH)(this,void 0,void 0,(function(){var a,o,i,l,u,c,d,p,h;return(0,r.YH)(this,(function(f){switch(f.label){case 0:if(a=this.props,o=a.searchApi,i=a.setLoading,l=a.env,o=(null==n?void 0:n.searchApi)||o,u=(null==n?void 0:n.searchTerm)||this.props.searchTerm||"term",c=(null==n?void 0:n.searchParam)||this.props.searchParam||{},d=(0,r.Cl)(((h={})[u]=e,h),c),!(0,s.Amo)(o,d))return[2,Promise.resolve([])];i(!0),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,l.fetcher(o,d,{cancelExecutor:t,autoAppend:!0})];case 2:return[2,(p=f.sent()).data&&p.data.options||p.data||[]];case 3:return i(!1),[7];case 4:return[2]}}))}))},t.prototype.deferLoad=function(e,t,n){return(0,r.sH)(this,void 0,void 0,(function(){var a,o,i,l,u,c,d;return(0,r.YH)(this,(function(r){switch(r.label){case 0:if(a=this.props,o=a.env,i=a.deferApi,l=a.setLoading,a.formInited,a.addHook,i=(null==n?void 0:n.deferApi)||i,!o||!o.fetcher)throw new Error("fetcher is required");if(u=(0,s.ed2)(e,{}),!(0,s.Amo)(i,u))return[2,Promise.resolve([])];r.label=1;case 1:return r.trys.push([1,,3,4]),[4,o.fetcher(i,u)];case 2:return c=r.sent(),d=c.data&&c.data.options||c.data||[],t&&d.forEach((function(e){e.isRef=!0})),[2,d];case 3:return l(!1),[7];case 4:return[2]}}))}))},t.prototype.changeValue=function(e){return(0,r.sH)(this,void 0,void 0,(function(){var t,n,a,o,i,l,u,d,p,h,f,m;return(0,r.YH)(this,(function(r){switch(r.label){case 0:return t=this.props,n=t.joinValues,a=t.extractValue,o=t.delimiter,i=t.multiple,l=t.valueField,u=t.onChange,d=t.options,t.setOptions,t.data,p=t.dispatchEvent,h=e,f=[],(Array.isArray(e)?e:e?[e]:[]).forEach((function(e){c()(d,(function(t){return t[l||"value"]==e[l||"value"]}))||f.push(e)})),n?h=i?Array.isArray(e)?e.map((function(e){return e[l||"value"]})).join(o):e?e[l||"value"]:"":h?h[l||"value"]:"":a&&(h=i?Array.isArray(e)?e.map((function(e){return e[l||"value"]})):e?[e[l||"value"]]:[]:h?h[l||"value"]:""),[4,p("change",(0,s.RKM)(this.props,{value:h,options:d,items:d}))];case 1:return(null==(m=r.sent())?void 0:m.prevented)||u(h),[2]}}))}))},t.prototype.renderStatic=function(){var e=this.props,t=e.selectedOptions,n=e.labelField,r=void 0===n?"label":n,o=e.classnames;return"avatar"===r?t.map((function(e,t){return a.createElement("img",{key:t,className:o("UserSelect-avatar-img"),src:e[r],alt:""})})):t.map((function(e){return e[r]})).join(",")},t.prototype.render=function(){var e=this,t=this.props,n=t.showNav,r=t.navTitle,o=t.searchable,s=t.options,u=t.className,c=(t.style,t.selectedOptions),d=t.tabOptions,p=t.multi,h=t.multiple,f=t.isDep,m=t.isRef,v=t.placeholder,y=t.searchPlaceholder,g=t.tabMode,S=t.data,b=t.displayFields,C=t.labelField,A=t.loadingConfig,F=t.disabled;return null==d||d.forEach((function(t){t.deferLoad=e.deferLoad,t.onChange=e.changeValue,t.onSearch=e.onSearch})),a.createElement("div",{className:i()("UserSelectControl",u)},g?a.createElement(l.nv,{selection:c,tabOptions:d,multiple:h,displayFields:b,onChange:this.changeValue,onSearch:this.onSearch,deferLoad:this.deferLoad,data:S,disabled:F}):a.createElement(l.oq,{loadingConfig:A,showNav:n,navTitle:r,selection:c,options:s,multi:p,multiple:h,searchable:o,placeholder:v,searchPlaceholder:y,deferLoad:this.deferLoad,onChange:this.changeValue,onSearch:this.onSearch,displayFields:b,labelField:C,isDep:f,isRef:m,disabled:F}))},t.defaultProps={showNav:!0},(0,r.Cg)([s.d6t,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[String,Function,Object]),(0,r.Sn)("design:returntype",Promise)],t.prototype,"onSearch",null),(0,r.Cg)([s.d6t,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object,Boolean,Object]),(0,r.Sn)("design:returntype",Promise)],t.prototype,"deferLoad",null),(0,r.Cg)([s.d6t,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",Promise)],t.prototype,"changeValue",null),(0,r.Cg)([(0,d.E)(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[]),(0,r.Sn)("design:returntype",void 0)],t.prototype,"render",null),t}(a.Component),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.C6)(t,e),(0,r.Cg)([(0,s.QqA)({type:"users-select"})],t)}(p)}}]);